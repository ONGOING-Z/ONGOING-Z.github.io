<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Java on ongoing's blog</title><link>https://ongoingblog.org/tags/java/</link><description>Recent content in Java on ongoing's blog</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Fri, 23 Jan 2026 10:52:33 +0800</lastBuildDate><atom:link href="https://ongoingblog.org/tags/java/index.xml" rel="self" type="application/rss+xml"/><item><title>一致性哈希</title><link>https://ongoingblog.org/2026/01/consistent-hashing/</link><pubDate>Fri, 23 Jan 2026 10:52:33 +0800</pubDate><guid>https://ongoingblog.org/2026/01/consistent-hashing/</guid><description>&lt;p&gt;对&lt;strong&gt;服务器数量&lt;/strong&gt;取模，当服务器新增或者减少时，导致每个元素都是重新计算哈希值。&lt;/p&gt;
&lt;p&gt;对&lt;strong&gt;固定值&lt;/strong&gt;取模，每个新增或者减少一个，只会影响到下一个结点，影响范围大大减少。&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-23-consistent-hashing/mq-consistent_hashing.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-23-consistent-hashing/mq-consistent_hashing.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>The Z Garbage Collector</title><link>https://ongoingblog.org/2026/01/zgc/</link><pubDate>Fri, 16 Jan 2026 19:25:33 +0800</pubDate><guid>https://ongoingblog.org/2026/01/zgc/</guid><description>&lt;p&gt;

















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-16-zgc/zgc_jep_01.png"
 class="image-loading-container"
 
 data-pswp-width="697"
 data-pswp-height="211"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-16-zgc/zgc_jep_01.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="697"
 height="211"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;




















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-16-zgc/zgc_jep_02.png"
 class="image-loading-container"
 
 data-pswp-width="772"
 data-pswp-height="184"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-16-zgc/zgc_jep_02.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="772"
 height="184"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;p&gt;&lt;a href="https://wiki.openjdk.org/spaces/zgc/overview"target="_blank" rel="noopener noreferrer"&gt;https://wiki.openjdk.org/spaces/zgc/overview&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;支持从 8 MB 到 16 TB 的堆&lt;/p&gt;
&lt;p&gt;保持一致的亚毫秒暂停时间&lt;/p&gt;
&lt;p&gt;可以使用以下命令启用 ZGC&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-XX:+UseZGC
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;G1 收集器的设计目标是取代 CMS 收集器，它同 CMS 相比，在以下方面表现的更出色：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;G1 是一个有整理内存过程的垃圾收集器，不会产生很多内存碎片。&lt;/li&gt;
&lt;li&gt;G1 的 Stop The World(STW) 更可控，G1 在停顿时间上添加了预测机制，用户可以指定期望停顿时间。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注：这里的 Mutator 代指应用程序线程。&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-16-zgc/jdk-jvm.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-16-zgc/jdk-jvm.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>布隆过滤器</title><link>https://ongoingblog.org/2026/01/bloom-filter/</link><pubDate>Mon, 05 Jan 2026 12:51:22 +0800</pubDate><guid>https://ongoingblog.org/2026/01/bloom-filter/</guid><description>&lt;p&gt;缓存经典的三种异常场景&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;场景&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;th&gt;解决方案&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;缓存穿透&lt;/td&gt;
 &lt;td&gt;数据库根本没有数据，所以缓存也没有。大量无效 key 全部涌入数据库查询&lt;/td&gt;
 &lt;td&gt;布隆过滤器&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;缓存击穿&lt;/td&gt;
 &lt;td&gt;缓存失效瞬间并发打到数据库，也就是很多都是无效查询。&lt;/td&gt;
 &lt;td&gt;在 redis 和数据库之间加分布式锁，限制只有一个会去查成功。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;缓存雪崩&lt;/td&gt;
 &lt;td&gt;大量 key 同时过期&lt;/td&gt;
 &lt;td&gt;解决：差异化缓存时间，不要让那么多的 key 同时失效。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="一角色"&gt;一、角色&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/jdk-bloom_filter.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/jdk-bloom_filter.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;初始时过滤器的位数组内容全都为 0:&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/BloomFilterInitialState_ManimCE_v0.19.1.png"
 class="image-loading-container"
 
 data-pswp-width="3840"
 data-pswp-height="2160"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/BloomFilterInitialState_ManimCE_v0.19.1.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt="BloomFilterInitialState_ManimCE_v0.19.1.png"
 
 class="lazy-image"
 
 width="3840"
 height="2160"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;put 元素进去后，这个元素经过不同的 hash 函数计算出对应的下标，命中的置为 1:&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/BloomFilterPutElement_ManimCE_v0.19.1.png"
 class="image-loading-container"
 
 data-pswp-width="3840"
 data-pswp-height="2160"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/BloomFilterPutElement_ManimCE_v0.19.1.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt="BloomFilterPutElement_ManimCE_v0.19.1.png"
 
 class="lazy-image"
 
 width="3840"
 height="2160"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;



















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/BloomFilterPutBanana_ManimCE_v0.19.1.png"
 class="image-loading-container"
 
 data-pswp-width="3840"
 data-pswp-height="2160"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2026-01-05-bloom-filter/BloomFilterPutBanana_ManimCE_v0.19.1.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt="BloomFilterPutBanana_ManimCE_v0.19.1.png"
 
 class="lazy-image"
 
 width="3840"
 height="2160"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;只有全为 1 的元素才被允许继续，有为 0 的那就不用再走后面的流程了。&lt;/p&gt;</description></item><item><title>JDK21 - Virtual Thread(虚拟线程)</title><link>https://ongoingblog.org/2025/12/virtual-thread/</link><pubDate>Fri, 26 Dec 2025 11:24:13 +0800</pubDate><guid>https://ongoingblog.org/2025/12/virtual-thread/</guid><description>&lt;div style='height: 20px'&gt;&lt;/div&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jdk-virtual_thread.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jdk-virtual_thread.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;虚拟线程是 JVM 层面的用户态线程，上下文切换由 JVM 完成，避免了内核态和用户态的切换。&lt;/p&gt;
&lt;p&gt;目标：方便写出 thread-per-request style 的代码。&lt;/p&gt;
&lt;p&gt;下面是一些 &lt;a href="https://openjdk.org/jeps/444"target="_blank" rel="noopener noreferrer"&gt;https://openjdk.org/jeps/444&lt;/a&gt; 的摘抄。&lt;/p&gt;
&lt;p&gt;

















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jep444_01.png"
 class="image-loading-container"
 
 data-pswp-width="952"
 data-pswp-height="231"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jep444_01.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="952"
 height="231"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;




















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jep444_02.png"
 class="image-loading-container"
 
 data-pswp-width="878"
 data-pswp-height="274"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jep444_02.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="878"
 height="274"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jep444_03.png"
 class="image-loading-container"
 
 data-pswp-width="1101"
 data-pswp-height="261"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-26-virtual-thread/jep444_03.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1101"
 height="261"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;A virtual thread is an instance of java.lang.Thread that is not tied to a particular OS thread. A platform thread, by contrast, is an instance of java.lang.Thread implemented in the traditional way, as a thin wrapper around an OS thread.&lt;/p&gt;</description></item><item><title>LongAdder</title><link>https://ongoingblog.org/2025/12/longadder/</link><pubDate>Fri, 19 Dec 2025 10:36:08 +0800</pubDate><guid>https://ongoingblog.org/2025/12/longadder/</guid><description>&lt;p&gt;LongAdder 真的好快啊。
如果不是金额类的计算，是那种接受误差的实时统计的话，肯定要用这个工具了。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;8 线程共享计数器，每个线程计算 100 万。


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-19-longadder/compute_time.png"
 class="image-loading-container"
 
 data-pswp-width="847"
 data-pswp-height="242"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-19-longadder/compute_time.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="847"
 height="242"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;80 线程共享计数器，每个线程计算 100 万。


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-19-longadder/compute_time_80.png"
 class="image-loading-container"
 
 data-pswp-width="904"
 data-pswp-height="301"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-19-longadder/compute_time_80.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="904"
 height="301"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在当前 Cell 竞争失败了，会去其他 Cell 再进行竞争，不会在当前的 Cell 进行竞争。&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-19-longadder/jdk-atomiclong_and_longadder.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-19-longadder/jdk-atomiclong_and_longadder.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>调用 Object.wait() 方法之后</title><link>https://ongoingblog.org/2025/12/after-call-object-wait-method/</link><pubDate>Thu, 18 Dec 2025 11:03:24 +0800</pubDate><guid>https://ongoingblog.org/2025/12/after-call-object-wait-method/</guid><description>&lt;p&gt;因为之前看到一个词叫作&lt;code&gt;虚假唤醒&lt;/code&gt;，我一遍只是记得书中在强调使用 &lt;code&gt;while&lt;/code&gt; 子句进行检查，而不是用&lt;code&gt;if&lt;/code&gt;子句检查，但是对这个印象比较深刻。&lt;/p&gt;
&lt;p&gt;但是我并不知道是为什么，因为我觉得这两种效果都是一样的，先来看下我之前是如何理解的。&lt;/p&gt;
&lt;h3 id="之前的理解-错误的"&gt;之前的理解 (错误的)&lt;/h3&gt;
&lt;h4 id="if-版本"&gt;if 版本&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;synchronized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2、当线程唤醒后，我之前理解的再次获取锁是从这里开始的&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1、线程停在这里...&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;doBusinessLogic&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="where-版本"&gt;where 版本&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;synchronized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2、当线程唤醒后，我之前理解的再次获取锁是从这里开始的&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1、线程停在这里...&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;doBusinessLogic&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果等待中的线程再次获取锁是从代码块开始的话，那就理解为什么前面我说这两种其实是一样的效果了。&lt;/p&gt;
&lt;p&gt;但是其实不是的&lt;/p&gt;
&lt;h3 id="修正之后的理解"&gt;修正之后的理解&lt;/h3&gt;
&lt;h4 id="if-版本-1"&gt;if 版本&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;synchronized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1、线程停在这里...&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2、当线程唤醒后，继续从停止的下一行开始&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;doBusinessLogic&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="where-版本-1"&gt;where 版本&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;synchronized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1、线程停在这里...&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2、当线程唤醒后，继续从停止的下一行开始&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;doBusinessLogic&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;wait 方法返回后，继续下一行代码的执行。&lt;/p&gt;</description></item><item><title>Springboot starter 的初始化时机</title><link>https://ongoingblog.org/2025/12/springboot-starter/</link><pubDate>Fri, 12 Dec 2025 14:53:04 +0800</pubDate><guid>https://ongoingblog.org/2025/12/springboot-starter/</guid><description>&lt;p&gt;先来看下自动配置类是如何被加载的，流程如下：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-12-springboot-starter/spring_process-load_starter.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-12-springboot-starter/spring_process-load_starter.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;来一个简单的示例，你定义的一个自己的场景启动器（starter）&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-12-springboot-starter/my_starter.png"
 class="image-loading-container"
 
 data-pswp-width="1098"
 data-pswp-height="540"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-12-springboot-starter/my_starter.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1098"
 height="540"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;这里项目的 spring.factories 文件中定义了一个键值对，键就是熟悉的注解@EnableAutoConfiguration，值是业务定义的配置类。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-12-12-springboot-starter/configuration_class.png"
 class="image-loading-container"
 
 data-pswp-width="767"
 data-pswp-height="340"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-12-12-springboot-starter/configuration_class.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="767"
 height="340"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;这个配置类只是简单地声明了一个业务类。&lt;/p&gt;
&lt;p&gt;这就是一个简单的 starter 项目。&lt;/p&gt;</description></item><item><title>中断</title><link>https://ongoingblog.org/2025/12/interrupt/</link><pubDate>Wed, 03 Dec 2025 19:00:48 +0800</pubDate><guid>https://ongoingblog.org/2025/12/interrupt/</guid><description>&lt;p&gt;我之前一直不太理解中断这个概念在程序中到底是什么含义。&lt;/p&gt;
&lt;p&gt;生活中这个概念当然很容易理解，比如你在做事情 A，别人打断你，让你去做其他事情。&lt;/p&gt;
&lt;p&gt;但是在 Java 中中断是什么含义呢？
线程 A 在执行，其他线程去中断线程 A。似乎是同样的含义。
之前我以为线程 A 当场就会反应针对这个中断进行反应，可能是直接报错什么的。
现在我在看了一些资料后，发现中断也是一种线程间的沟通交流方式，就像 wait 和 notify 一样。&lt;/p&gt;
&lt;p&gt;它是一种通知，一种信号。
类似酶和受体，
有对酶起反应的受体，受体就会有相应的化学反应发生。
如果没有受体或者没有对那种酶产生反应的受体的话，那样就什么情况也没有。&lt;/p&gt;
&lt;p&gt;程序中也是如此，如果你对当前线程执行了中断操作，后续步骤中如果没有响应中断的逻辑的话，程序不会有什么异常产生，就和正常程序一样。
如果后续逻辑支持响应中断，那就可以消费掉这种信号，识别出这种信号，进而产生反应。
如果你的程序中没有相应的逻辑去消费掉这种信号的话，这种信号就成为了一种废弃的、冗余的信号。&lt;/p&gt;
&lt;p&gt;所以现在你如果需要在你的程序中去对外界对你产生的中断有反应的话，有两种方式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;自行去判断当前线程是否被中断，这在 Thread 类中有专门的方法去判断。&lt;/li&gt;
&lt;li&gt;使用已经封装了会响应中断的 API。这样的话，就不需要你去写响应中断的逻辑了。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;另外一个值得注意的是，中断信号是一次性的。&lt;/strong&gt;
也就是说，你的线程如果消耗掉了，那就不会再有了。那些响应中断的 API 在抛出中断异常后，这种信号就没有了。所以常常会看到程序在 catch 掉中断异常后，又去触发了下当前线程的中断，来维持住中断信号的传递。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;中断还可以作为唤醒的一种手段。&lt;/strong&gt;
当线程在 wait, join 途中，是可以被中断的，这样的话，线程就会从当前状态中退出。
具体的 API 是否会响应中断，可以看下对应 API 的文档，如果会响应中断，就会在文档中标识。&lt;/p&gt;</description></item><item><title>Spring MVC</title><link>https://ongoingblog.org/2025/11/spring-mvc/</link><pubDate>Wed, 26 Nov 2025 09:46:49 +0800</pubDate><guid>https://ongoingblog.org/2025/11/spring-mvc/</guid><description>&lt;p&gt;框架接受请求并处理的流程。&lt;/p&gt;
&lt;h3 id="一dispatcherservlet-继承图"&gt;一、DispatcherServlet 继承图&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/diagram_DispatcherServlet.png"
 class="image-loading-container"
 
 data-pswp-width="817"
 data-pswp-height="851"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/diagram_DispatcherServlet.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="817"
 height="851"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;



















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/annotation_requestmapping.png"
 class="image-loading-container"
 
 data-pswp-width="418"
 data-pswp-height="175"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/annotation_requestmapping.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="418"
 height="175"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="二扫描流程"&gt;二、扫描流程&lt;/h3&gt;
&lt;h3 id="三触发流程"&gt;三、触发流程&lt;/h3&gt;
&lt;h4 id="一getmapping"&gt;（一）、@GetMapping&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/spring_process-mvc_invocation_get.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/spring_process-mvc_invocation_get.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h4 id="二postmapping"&gt;（二）、@PostMapping&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/spring_process-mvc_invocation_post.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-26-spring-mvc/spring_process-mvc_invocation_post.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>hikaricp</title><link>https://ongoingblog.org/2025/11/hikaricp/</link><pubDate>Wed, 26 Nov 2025 09:46:30 +0800</pubDate><guid>https://ongoingblog.org/2025/11/hikaricp/</guid><description>&lt;h3 id="版本-111"&gt;版本 1.1.1&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-26-hikaricp/hikaricp1_1_1.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-26-hikaricp/hikaricp1_1_1.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;主要版本的参数配置 todo&lt;/p&gt;
&lt;p&gt;com.zaxxer.hikari.util.FastList&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;add 和 remove 都取消了范围检查&lt;/li&gt;
&lt;li&gt;remove 从最后位置进行遍历&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Spring retry</title><link>https://ongoingblog.org/2025/11/spring-retry/</link><pubDate>Wed, 26 Nov 2025 09:46:06 +0800</pubDate><guid>https://ongoingblog.org/2025/11/spring-retry/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-26-spring-retry/spring_process-spring-retry.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-26-spring-retry/spring_process-spring-retry.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>MBean</title><link>https://ongoingblog.org/2025/11/mbean/</link><pubDate>Mon, 24 Nov 2025 18:27:52 +0800</pubDate><guid>https://ongoingblog.org/2025/11/mbean/</guid><description>&lt;p&gt;在看 hikaricp 源码时，看到了这样一句&lt;/p&gt;
&lt;p&gt;初始化 HikariPool 时&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;检查配置合法性&lt;/li&gt;
&lt;li&gt;赋值配置属性&lt;/li&gt;
&lt;li&gt;注册 MBean&lt;/li&gt;
&lt;li&gt;启动内务整理 daemon 线程&lt;/li&gt;
&lt;li&gt;填满连接池&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这里第 3 点，会将连接池对象和连接池配置对象注册为 MBean。&lt;/p&gt;
&lt;p&gt;主要是为了方便监控，如下图，这是在 jconsole 中显示的内容：&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-24-mbean/jconsole_mbean.png"
 class="image-loading-container"
 
 data-pswp-width="900"
 data-pswp-height="750"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-24-mbean/jconsole_mbean.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="900"
 height="750"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>jconsole</title><link>https://ongoingblog.org/2025/11/jconsole/</link><pubDate>Mon, 24 Nov 2025 18:11:44 +0800</pubDate><guid>https://ongoingblog.org/2025/11/jconsole/</guid><description>&lt;p&gt;直接在命令行中输入&lt;code&gt;jconsole&lt;/code&gt;即可打开，选择对应的进程。可以查看堆的使用情况。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-24-jconsole/jconsole.png"
 class="image-loading-container"
 
 data-pswp-width="900"
 data-pswp-height="750"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-24-jconsole/jconsole.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="900"
 height="750"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>Spring 注解：@Value</title><link>https://ongoingblog.org/2025/11/annotation-value/</link><pubDate>Wed, 19 Nov 2025 16:05:09 +0800</pubDate><guid>https://ongoingblog.org/2025/11/annotation-value/</guid><description>&lt;p&gt;处理流程图如下&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-19-annotation-value/spring_process-Value.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-19-annotation-value/spring_process-Value.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>WeakReference</title><link>https://ongoingblog.org/2025/11/weak-reference/</link><pubDate>Wed, 19 Nov 2025 10:12:15 +0800</pubDate><guid>https://ongoingblog.org/2025/11/weak-reference/</guid><description>&lt;p&gt;Java 中的 Reference 类型&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;strong reference&lt;/li&gt;
&lt;li&gt;WeakReference&lt;/li&gt;
&lt;li&gt;SoftReference&lt;/li&gt;
&lt;li&gt;PhantomReference&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="一weakreference"&gt;一、WeakReference&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-19-weak-reference/jdk-reference.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-19-weak-reference/jdk-reference.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Java label 语法</title><link>https://ongoingblog.org/2025/11/java-label/</link><pubDate>Wed, 12 Nov 2025 23:36:59 +0800</pubDate><guid>https://ongoingblog.org/2025/11/java-label/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-11-12-java-label/retry.png"
 class="image-loading-container"
 
 data-pswp-width="744"
 data-pswp-height="649"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-11-12-java-label/retry.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="744"
 height="649"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;我在 java.util.concurrent.ThreadPoolExecutor 中看到上图的这个 retry 字段&lt;/p&gt;
&lt;p&gt;看了下，是 java 的一种 label 语法，通常用于多层循环。
不然还得一层层剥开往外跳。&lt;/p&gt;</description></item><item><title>this 引用的逃逸</title><link>https://ongoingblog.org/2025/11/this-escape/</link><pubDate>Tue, 04 Nov 2025 19:50:10 +0800</pubDate><guid>https://ongoingblog.org/2025/11/this-escape/</guid><description>&lt;p&gt;今天继续在看《JCIP》这本书。关于线程安全这里有说一个名词&lt;code&gt;this escape&lt;/code&gt;，叫作 this 引用逃逸。它举了一个例子，但是不是很理解，给的例子如下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ThisEscape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;ThisEscape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EventSource&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eventSource&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eventSource&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;registerListener&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EventListener&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;handleEvent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;doSomething&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;之后去问了下 deepseek，它给了我一个 Runnable 的例子，我看到这个一下就理解了。&lt;/p&gt;
&lt;p&gt;测试程序&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;InnerClassDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;innerClass&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;task&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;是的，平时在重写 run 方法时，会很平常地去使用类中的成员变量，想当然的可以去用，因为都在同一个类中。&lt;/p&gt;
&lt;p&gt;但是并没有去想过内部类去访问外部类的属性时还有这一步。&lt;/p&gt;</description></item><item><title>rocketmq: broker store</title><link>https://ongoingblog.org/2025/10/broker-store/</link><pubDate>Fri, 24 Oct 2025 13:16:05 +0800</pubDate><guid>https://ongoingblog.org/2025/10/broker-store/</guid><description>&lt;h3 id="一broker-收取消息流程"&gt;一、broker 收取消息流程&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-24-broker-store/mq-broker_store.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-24-broker-store/mq-broker_store.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="二messagestore-存储消息流程"&gt;二、MessageStore 存储消息流程&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-24-broker-store/mq-MessageStore.png"
 class="image-loading-container"
 
 data-pswp-width="990"
 data-pswp-height="316"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-24-broker-store/mq-MessageStore.png?format=webp&amp;amp;quality=85"
 alt=""
 class="lazy-image"
 
 width="990"
 height="316"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>rocketmq: producer send</title><link>https://ongoingblog.org/2025/10/rmq-producer-send/</link><pubDate>Wed, 22 Oct 2025 21:50:45 +0800</pubDate><guid>https://ongoingblog.org/2025/10/rmq-producer-send/</guid><description>&lt;h3 id="一producer-send"&gt;一、producer send&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-22-rmq-producer-send/mq-producer_send.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-22-rmq-producer-send/mq-producer_send.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="二底层通信"&gt;二、底层通信&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-22-rmq-producer-send/mq-underlying_communcation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-22-rmq-producer-send/mq-underlying_communcation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="三多个队列"&gt;三、多个队列&lt;/h3&gt;
&lt;p&gt;今早我在麦当劳点餐
我看到前台那里划了 10 个通道 (如下图)&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-22-rmq-producer-send/mq-McDonald.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-22-rmq-producer-send/mq-McDonald.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;手机点餐是 35 开头，例如 35101, 35102&lt;/li&gt;
&lt;li&gt;店内点餐是 39 开头，例如 39101, 39102&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这样的话，每个人下单后根据单号找到最后一个尾号，去到对应的一个队列里找餐食即可，减少的扫描的个数，更快了。&lt;/p&gt;</description></item><item><title>rocketmq: pull message and consume</title><link>https://ongoingblog.org/2025/10/pulling-and-consuming-messages/</link><pubDate>Wed, 22 Oct 2025 14:47:34 +0800</pubDate><guid>https://ongoingblog.org/2025/10/pulling-and-consuming-messages/</guid><description>&lt;p&gt;这里展示 rmq 拉取及消费消息时的主要流程：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-22-pulling-and-consuming-messages/mq-pulling_consuming_msg.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-22-pulling-and-consuming-messages/mq-pulling_consuming_msg.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Semaphore</title><link>https://ongoingblog.org/2025/10/semaphore/</link><pubDate>Tue, 21 Oct 2025 11:19:54 +0800</pubDate><guid>https://ongoingblog.org/2025/10/semaphore/</guid><description>&lt;p&gt;读法：sam four。&lt;/p&gt;
&lt;p&gt;可以用来资源访问的控制器。&lt;/p&gt;
&lt;p&gt;例如一个服务站点只能最多同时服务 5 个人，你是站长，你手上就只有 5 个号牌。
来一个客户，就取走一个，客户服务完毕，回来又还给你。&lt;/p&gt;
&lt;p&gt;或者你是停车场的管理者：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-21-semaphore/jdk-semaphore.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-21-semaphore/jdk-semaphore.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Eclipse debug lock owns</title><link>https://ongoingblog.org/2025/10/eclipse-debug-lock-owns/</link><pubDate>Tue, 21 Oct 2025 10:02:23 +0800</pubDate><guid>https://ongoingblog.org/2025/10/eclipse-debug-lock-owns/</guid><description>&lt;p&gt;我发现 eclipse 中调试的界面上有下面这个符号&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-21-eclipse-debug-lock-owns/eclipse_owns_lock.png"
 class="image-loading-container"
 
 data-pswp-width="1117"
 data-pswp-height="519"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-21-eclipse-debug-lock-owns/eclipse_owns_lock.png?format=webp&amp;amp;quality=85"
 alt=""
 class="lazy-image"
 
 width="1117"
 height="519"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;这里会展示当前线程持有的锁对象，这里正常锁这个实例，很方便，是 idea 现在没有的。&lt;/p&gt;</description></item><item><title>InvocationHandler 例子</title><link>https://ongoingblog.org/2025/10/create-proxy-object-manually/</link><pubDate>Tue, 14 Oct 2025 20:14:32 +0800</pubDate><guid>https://ongoingblog.org/2025/10/create-proxy-object-manually/</guid><description>&lt;p&gt;这里展示一个手动用 jdk 代理创建代理对象的例子。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;定义业务接口及方法&lt;/li&gt;
&lt;li&gt;自定义自己的 handler，设计好在方法前后要添加的逻辑&lt;/li&gt;
&lt;li&gt;创建代理对象&lt;/li&gt;
&lt;li&gt;触发代理对象&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="一自己的业务方法"&gt;一、自己的业务方法&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;SimpleInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;sayHello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;calculate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimpleInterfaceImpl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;sayHello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Hello, &amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;!&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;calculate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="二实现-invocationhandler"&gt;二、实现 InvocationHandler&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 自定义的 InvocationHandler，用于添加日志功能
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LoggingInvocationHandler&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;InvocationHandler&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 被代理的目标对象&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;LoggingInvocationHandler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;target&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;invoke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Method&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;throws&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Throwable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 方法调用前的日志&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;=== 方法调用开始 ===&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;调用方法：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;方法参数：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Arrays&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;startTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;currentTimeMillis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 调用目标对象的方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;invoke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;endTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;currentTimeMillis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 方法调用后的日志&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;方法返回值：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;方法执行时间：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;endTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;startTime&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;ms&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;=== 方法调用结束 ===\n&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;catch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;方法调用异常：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getMessage&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;=== 方法调用结束 ===\n&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;throw&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三测试验证"&gt;三、测试验证&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ProxyExample&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1. 创建目标对象&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleInterfaceImpl&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2. 创建 InvocationHandler&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LoggingInvocationHandler&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LoggingInvocationHandler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 3. 使用 Proxy.newProxyInstance 创建代理对象&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SimpleInterface&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Proxy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;newProxyInstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getClassLoader&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 类加载器&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getInterfaces&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 接口数组&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// InvocationHandler&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 4. 使用代理对象调用方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;=== 使用代理对象调用方法 ===&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 调用 sayHello 方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sayHello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;张三&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;最终结果：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 调用 calculate 方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calculate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;20&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;最终结果：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;result2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 5. 对比：直接调用目标对象（无代理）&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;\n=== 直接调用目标对象（无代理） ===&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directResult1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sayHello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;李四&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;直接调用结果：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directResult1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directResult2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;calculate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;15&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;直接调用结果：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directResult2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行结果&lt;/p&gt;</description></item><item><title>Spring Async 对象的触发</title><link>https://ongoingblog.org/2025/10/spring-async-object-invocation/</link><pubDate>Tue, 14 Oct 2025 14:06:38 +0800</pubDate><guid>https://ongoingblog.org/2025/10/spring-async-object-invocation/</guid><description>&lt;p&gt;流程图：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-14-spring-async-object-invocation/spring_process-async_invocation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-14-spring-async-object-invocation/spring_process-async_invocation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Spring Async 对象的创建</title><link>https://ongoingblog.org/2025/10/spring-async-object-creation/</link><pubDate>Tue, 14 Oct 2025 14:06:22 +0800</pubDate><guid>https://ongoingblog.org/2025/10/spring-async-object-creation/</guid><description>&lt;p&gt;流程图：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-14-spring-async-object-creation/spring_process-async_infra_object_creation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-14-spring-async-object-creation/spring_process-async_infra_object_creation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>自定义 Scope</title><link>https://ongoingblog.org/2025/10/custom-scope/</link><pubDate>Wed, 08 Oct 2025 19:32:35 +0800</pubDate><guid>https://ongoingblog.org/2025/10/custom-scope/</guid><description>&lt;p&gt;当你觉得每次获取实例，只会返回给你同一个，或者每次获取实例，都会创建新的，这两种方式你都不满意的情况下，你就可以去自定义自己的作用域了。&lt;/p&gt;
&lt;p&gt;我觉得这东西就和 facotrybean 一样，方便开发者来自定义一些创建逻辑，个性化的逻辑。&lt;/p&gt;
&lt;p&gt;这里我想要实现一个功能：每次从容器中获取，都会给我返回一个这个实例的计数器，展示这个实例是第多个类下的实例。&lt;/p&gt;
&lt;p&gt;大致步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;定义自定义的 scope&lt;/li&gt;
&lt;li&gt;把自定义的 scope 注册到容器中&lt;/li&gt;
&lt;li&gt;多次从容器中获取 bean，验证效果是否正常。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="一定义自定义的-scope"&gt;一、定义自定义的 scope&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.beans.factory.ObjectFactory&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.beans.factory.config.Scope&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;OneScope&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Scope&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ObjectFactory&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;objectFactory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;get 被调用&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;skywalker-&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;registerDestructionCallback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;resolveContextualObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getConversationId&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="二为自己的实例设置自定义的-scope"&gt;二、为自己的实例设置自定义的 scope&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Component&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Scope&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;one&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Student&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getIndex&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setIndex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三测试验证"&gt;三、测试验证&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Application&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1、创建容器&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2、注册 scope&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBeanFactory&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;registerScope&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;one&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OneScope&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MyConfig&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;refresh&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 3、多次获取 Bean&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Student&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;myBean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;==&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myBean&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Student&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;myBean2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Student&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myBean2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行结果&lt;/p&gt;</description></item><item><title>Mybatis 查询流程</title><link>https://ongoingblog.org/2025/10/mybatis-query/</link><pubDate>Tue, 07 Oct 2025 19:35:25 +0800</pubDate><guid>https://ongoingblog.org/2025/10/mybatis-query/</guid><description>&lt;h3 id="一缓存示意图"&gt;一、缓存示意图&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-07-mybatis-query/mybatis-level1_level2.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-07-mybatis-query/mybatis-level1_level2.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="二查询流程"&gt;二、查询流程&lt;/h3&gt;
&lt;p&gt;注意查询顺序：二级缓存 (namespace 级别) -&amp;gt; 一级缓存 (sqlSession 级别) -&amp;gt; 数据库&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-10-07-mybatis-query/mybatis-mybatis-query.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-10-07-mybatis-query/mybatis-mybatis-query.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Spring Cache</title><link>https://ongoingblog.org/2025/09/spring-cache/</link><pubDate>Thu, 25 Sep 2025 11:02:16 +0800</pubDate><guid>https://ongoingblog.org/2025/09/spring-cache/</guid><description>&lt;h3 id="一缓存注解"&gt;一、缓存注解&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;注解&lt;/th&gt;
 &lt;th&gt;说明&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;@Cacheable&lt;/td&gt;
 &lt;td&gt;缓存查询结果，如果缓存存在则直接返回&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;@CachePut&lt;/td&gt;
 &lt;td&gt;更新缓存，无论缓存是否存在都会执行方法并更新缓存&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;@CacheEvict&lt;/td&gt;
 &lt;td&gt;清除缓存，可以清除单个或所有缓存条目&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="二主要流程"&gt;二、主要流程&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-09-25-spring-cache/spring_process-spring-cache-main-flow.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-09-25-spring-cache/spring_process-spring-cache-main-flow.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Seata TCC 对象的触发</title><link>https://ongoingblog.org/2025/09/seata-tcc-object-invocation/</link><pubDate>Tue, 16 Sep 2025 13:48:02 +0800</pubDate><guid>https://ongoingblog.org/2025/09/seata-tcc-object-invocation/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-09-16-seata-tcc-object-invocation/flow_seata-seata-tcc_object_invocation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-09-16-seata-tcc-object-invocation/flow_seata-seata-tcc_object_invocation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Seata TCC 对象的创建</title><link>https://ongoingblog.org/2025/09/seata-tcc-object-creation/</link><pubDate>Tue, 16 Sep 2025 13:47:42 +0800</pubDate><guid>https://ongoingblog.org/2025/09/seata-tcc-object-creation/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-09-16-seata-tcc-object-creation/flow_seata-seata-tcc_object_creation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-09-16-seata-tcc-object-creation/flow_seata-seata-tcc_object_creation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Seata 分支事务注册的时机</title><link>https://ongoingblog.org/2025/09/the-timing-of-seata-branch-transaction-registration/</link><pubDate>Tue, 09 Sep 2025 15:02:45 +0800</pubDate><guid>https://ongoingblog.org/2025/09/the-timing-of-seata-branch-transaction-registration/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;我们在执行真正的 sql 语句时，seata 会拦截我们的操作，这里我们看下是如何拦截的，以及分支事务触发的时机。&lt;/p&gt;
&lt;h3 id="二流程"&gt;二、流程&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-09-09-The-Timing-of-Seata-Branch-Transaction-Registration/flow_seata-seata_jdbctemplate.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-09-09-The-Timing-of-Seata-Branch-Transaction-Registration/flow_seata-seata_jdbctemplate.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;这里可以查看下&lt;a href="https://ongoingblog.org/2025/09/jdbctemplate/"&gt;JdbcTemplate 对象的触发&lt;/a&gt;。&lt;/p&gt;</description></item><item><title>JdbcTemplate 对象的创建及触发</title><link>https://ongoingblog.org/2025/09/jdbctemplate/</link><pubDate>Tue, 09 Sep 2025 11:34:24 +0800</pubDate><guid>https://ongoingblog.org/2025/09/jdbctemplate/</guid><description>&lt;p&gt;JdbcTemplate 是 spring 框架中支持 sql 语句执行的组件，使用起来很方便。这里主要展示下 JdbcTemplate 对象的创建及触发流程。&lt;/p&gt;
&lt;h3 id="一对象的创建"&gt;一、对象的创建&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-09-09-JdbcTemplate/spring_process-jdbctemplate_object_creation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-09-09-JdbcTemplate/spring_process-jdbctemplate_object_creation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="二对象的触发"&gt;二、对象的触发&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-09-09-JdbcTemplate/spring_process-jdbctemplate_object_invocation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-09-09-JdbcTemplate/spring_process-jdbctemplate_object_invocation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>事务传播：required - nested</title><link>https://ongoingblog.org/2025/08/tx-required-nested/</link><pubDate>Thu, 28 Aug 2025 13:42:05 +0800</pubDate><guid>https://ongoingblog.org/2025/08/tx-required-nested/</guid><description>&lt;h3 id="一正常提交"&gt;一、正常提交&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-28-tx-required-nested/spring_process-tx-required-nested.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-28-tx-required-nested/spring_process-tx-required-nested.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="二异常回滚"&gt;二、异常回滚&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-28-tx-required-nested/spring_process-tx-required-nested_exception.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-28-tx-required-nested/spring_process-tx-required-nested_exception.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>事务传播：required - requiresnew</title><link>https://ongoingblog.org/2025/08/tx-required-requiresnew/</link><pubDate>Thu, 28 Aug 2025 13:41:58 +0800</pubDate><guid>https://ongoingblog.org/2025/08/tx-required-requiresnew/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-28-tx-required-requiresnew/spring_process-tx-required-requires_new_exception.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-28-tx-required-requiresnew/spring_process-tx-required-requires_new_exception.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>事务传播：required - required</title><link>https://ongoingblog.org/2025/08/tx-required-required/</link><pubDate>Wed, 27 Aug 2025 23:48:47 +0800</pubDate><guid>https://ongoingblog.org/2025/08/tx-required-required/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-27-tx-required-required/spring_process-tx-required-required_exception.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-27-tx-required-required/spring_process-tx-required-required_exception.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>本地消息表</title><link>https://ongoingblog.org/2025/08/local-message-table/</link><pubDate>Mon, 25 Aug 2025 16:19:46 +0800</pubDate><guid>https://ongoingblog.org/2025/08/local-message-table/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;将要发送到外部系统的消息和自己本地的业务数据，放在同一个数据库事务里进行保存。&lt;/p&gt;
&lt;p&gt;通过这种方式，本地业务操作和消息的存储具备了 原子性：&lt;/p&gt;
&lt;p&gt;成功：业务数据和消息同时被存入数据库。&lt;/p&gt;
&lt;p&gt;失败：业务数据和消息同时回滚，仿佛发送消息的操作从未发生过。&lt;/p&gt;
&lt;p&gt;暂存，先保存，后处理。&lt;/p&gt;
&lt;p&gt;这很像是登记任务后，后台异步任务处理而已。&lt;/p&gt;
&lt;p&gt;其实之前像是异步登记的任务，差不多都是这种模式的，只要用户对于实时性不是那么的高。&lt;/p&gt;
&lt;h3 id="二流程"&gt;二、流程&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-25-local-message-table/spring_process-local_message_table.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-25-local-message-table/spring_process-local_message_table.svg"
 alt=""
 
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="三独立消息服务"&gt;三、独立消息服务&lt;/h3&gt;
&lt;p&gt;除了本地消息外，还有使用消息中间件的独立服务。这个更加专业，性能也更好。消息和业务分开。&lt;/p&gt;</description></item><item><title>方法签名</title><link>https://ongoingblog.org/2025/08/method-signature/</link><pubDate>Fri, 15 Aug 2025 14:05:04 +0800</pubDate><guid>https://ongoingblog.org/2025/08/method-signature/</guid><description>&lt;p&gt;方法名是方法的&amp;quot;名字&amp;quot;，&lt;/p&gt;
&lt;p&gt;方法签名是方法的&amp;quot;身份证&amp;quot;。&lt;/p&gt;
&lt;p&gt;类似人的名字，叫作“张三”的人可能有很多，但是这些人的身份证号都是唯一的。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;cal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;方法名：cal
方法签名：cal(int, int)&lt;/p&gt;
&lt;p&gt;方法签名是唯一的。&lt;/p&gt;</description></item><item><title>Seata 代理对象的创建</title><link>https://ongoingblog.org/2025/08/seata-proxy-object-creatation/</link><pubDate>Sat, 09 Aug 2025 18:54:47 +0800</pubDate><guid>https://ongoingblog.org/2025/08/seata-proxy-object-creatation/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;这里看下 Seata 代理对象在容器启动过程中流程是怎样的。&lt;/p&gt;
&lt;h3 id="二主要流程"&gt;二、主要流程&lt;/h3&gt;
&lt;p&gt;主要看两个地方：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;注册 BeanPostProcessors: GlobalTransactionScanner&lt;/li&gt;
&lt;li&gt;应用 BeanPostProcessors: applyBeanPostProcessorsAfterInitialization&lt;/li&gt;
&lt;/ol&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-09-seata-proxy-object-creatation/spring_process-seata-proxy-object-creation_20250812.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-09-seata-proxy-object-creatation/spring_process-seata-proxy-object-creation_20250812.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>IDEA plugin: spring-debugger</title><link>https://ongoingblog.org/2025/08/spring-debugger/</link><pubDate>Tue, 05 Aug 2025 13:30:48 +0800</pubDate><guid>https://ongoingblog.org/2025/08/spring-debugger/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一一些符号的表示"&gt;一、一些符号的表示&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二logical-view"&gt;二、logical view&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三适用范围"&gt;三、适用范围&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#四一些示例"&gt;四、一些示例&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;p&gt;这个插件在 debug 的时候很有用。&lt;/p&gt;</description></item><item><title>注解 @SpringBootTest</title><link>https://ongoingblog.org/2025/08/annotation-springboottest/</link><pubDate>Sun, 03 Aug 2025 17:44:19 +0800</pubDate><guid>https://ongoingblog.org/2025/08/annotation-springboottest/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;这里我们看下在我们的测试程序上加上注解 @SpringBootTest 后，这个注解是如何为我们创建一个测试用的 ApplicationContext 的。&lt;/p&gt;
&lt;p&gt;在执行我们的测试方法之前框架为我们准备了哪些东西。&lt;/p&gt;
&lt;h3 id="二主要流程"&gt;二、主要流程&lt;/h3&gt;
&lt;h4 id="一测试用-application-的构建"&gt;（一）测试用 Application 的构建&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-08-03-annotation-springboottest/spring_process-TestContext_20250812.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-08-03-annotation-springboottest/spring_process-TestContext_20250812.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Seata 执行测试程序报错：程序包 org.apache.seata.core.protocol.generated 不存在</title><link>https://ongoingblog.org/2025/08/seata-core-package-generated/</link><pubDate>Sun, 03 Aug 2025 17:41:47 +0800</pubDate><guid>https://ongoingblog.org/2025/08/seata-core-package-generated/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一背景"&gt;一、背景&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二解决方法"&gt;二、解决方法&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三快捷方式"&gt;三、快捷方式&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;把 seata 源码 clone 下来了，需要一个简单的例子，先把功能用起来，但是执行后发现报错，程序包 org.apache.seata.core.protocol.generated 不存在。&lt;/p&gt;</description></item><item><title>@Bean 方法之间的调用 (full 模式)</title><link>https://ongoingblog.org/2025/07/invocation-between-beanmethod/</link><pubDate>Sun, 27 Jul 2025 15:04:47 +0800</pubDate><guid>https://ongoingblog.org/2025/07/invocation-between-beanmethod/</guid><description>&lt;p&gt;注意：full 模式的定义可以查看&lt;a href="https://ongoingblog.org/2025/06/2025-06-18-configuration-full-and-lite/"&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id="一主要流程"&gt;一、主要流程&lt;/h2&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-27-invocation-between-beanmethod/spring_process-BeanMethod_20250812.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-27-invocation-between-beanmethod/spring_process-BeanMethod_20250812.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h2 id="二测试程序"&gt;二、测试程序&lt;/h2&gt;
&lt;p&gt;程序结构&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;├── ApplicationTest.java
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;├── config
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;│   └── MyConfig.java
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;└── domain
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ├── A.java
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; └── B.java
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;程序文件&lt;/p&gt;
&lt;p&gt;&lt;a href="javafiles/config/MyConfig.java"&gt;MyConfig.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="javafiles/domain/A.java"&gt;A.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="javafiles/domain/B.java"&gt;B.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="javafiles/ApplicationTest.java"&gt;ApplicationTest.java&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Java 中的数字分隔</title><link>https://ongoingblog.org/2025/07/number-separation/</link><pubDate>Sun, 27 Jul 2025 14:10:16 +0800</pubDate><guid>https://ongoingblog.org/2025/07/number-separation/</guid><description>&lt;p&gt;为什么提高代码的阅读性，可以在代码中将 100000 表示为&lt;code&gt;100_000&lt;/code&gt;，不会对性能产生影响。&lt;/p&gt;
&lt;p&gt;数字字面量下划线（Underscores in Numeric Literals）的特性，从 Java 7 开始引入。这个设计主要是为了提高代码可读性。&lt;/p&gt;
&lt;p&gt;可以在测试程序中多多使用。&lt;/p&gt;</description></item><item><title>@Bean 方法名称的生成逻辑</title><link>https://ongoingblog.org/2025/07/the-generation-logic-of-at-bean-method-names/</link><pubDate>Wed, 23 Jul 2025 09:44:36 +0800</pubDate><guid>https://ongoingblog.org/2025/07/the-generation-logic-of-at-bean-method-names/</guid><description>&lt;p&gt;org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader#loadBeanDefinitionsForBeanMethod&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-23-the-generation-logic-of-at-bean-method-names/bean_method_name.png"
 class="image-loading-container"
 
 data-pswp-width="880"
 data-pswp-height="644"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-23-the-generation-logic-of-at-bean-method-names/bean_method_name.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="880"
 height="644"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>激活框架日志</title><link>https://ongoingblog.org/2025/07/2025-07-16-active-spring-framework-logging/</link><pubDate>Wed, 16 Jul 2025 14:16:52 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-16-active-spring-framework-logging/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;在 debug 程序过程中，将框架中原有的日志打印到控制台中也很有利于 debug 的进行。这里对 spring framework 的日志进行配置并且激活。&lt;/p&gt;
&lt;h3 id="二步骤"&gt;二、步骤&lt;/h3&gt;
&lt;h4 id="一添加依赖"&gt;（一）添加依赖&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-groovy" data-lang="groovy"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;dependencies&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// Logback 实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;implementation&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ch.qos.logback:logback-classic:1.2.13&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// SLF4J API
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;implementation&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.slf4j:slf4j-api:1.7.36&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 桥接 Commons Logging (JCL)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;implementation&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.slf4j:jcl-over-slf4j:1.7.36&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 桥接 Java Util Logging (JUL)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;implementation&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.slf4j:jul-to-slf4j:1.7.36&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 排除其他日志框架（同上）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;configurations&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;all&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 排除所有 Log4j2 相关依赖
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.apache.logging.log4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;log4j-core&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.apache.logging.log4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;log4j-api&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.apache.logging.log4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;log4j-slf4j-impl&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.apache.logging.log4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;log4j-slf4j2-impl&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.apache.logging.log4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;log4j-jcl&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.apache.logging.log4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;log4j-jul&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// 确保没有其他 SLF4J 实现
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.slf4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;slf4j-simple&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;exclude&lt;/span&gt; &lt;span class="nl"&gt;group:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;org.slf4j&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;module:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;slf4j-log4j12&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="二添加配置文件"&gt;（二）添加配置文件&lt;/h4&gt;
&lt;p&gt;logback.xml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c"&gt;&amp;lt;!-- 控制台输出 --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;appender&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;CONSOLE&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;ch.qos.logback.core.ConsoleAppender&amp;#34;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;encoder&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;pattern&amp;gt;&lt;/span&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;span class="nt"&gt;&amp;lt;/pattern&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;/encoder&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;/appender&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c"&gt;&amp;lt;!-- 设置 Spring 日志级别 --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;logger&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;org.springframework&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;level=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;logger&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;org.springframework.beans&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;level=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;TRACE&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;logger&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;org.springframework.context&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;level=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;logger&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;org.springframework.web&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;level=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;logger&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;org.springframework.transaction&amp;#34;&lt;/span&gt; &lt;span class="na"&gt;level=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;TRACE&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c"&gt;&amp;lt;!-- 根日志级别 --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;root&lt;/span&gt; &lt;span class="na"&gt;level=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;INFO&amp;#34;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;appender-ref&lt;/span&gt; &lt;span class="na"&gt;ref=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;CONSOLE&amp;#34;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;lt;/root&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三测试是否正常"&gt;三、测试是否正常&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.slf4j.Logger&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.slf4j.LoggerFactory&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 激活 spring framework 日志模块。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 测试框架日志打印是否正常。
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LogTest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LoggerFactory&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LogTest&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Logback 成功运行在 Java {}&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;java.version&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;效果


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-16-active-spring-framework-logging/console_log.png"
 class="image-loading-container"
 
 data-pswp-width="887"
 data-pswp-height="449"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-16-active-spring-framework-logging/console_log.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="887"
 height="449"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;</description></item><item><title>事务代理对象的触发</title><link>https://ongoingblog.org/2025/07/2025-07-15-invocation-of-transactional-proxy-objects/</link><pubDate>Tue, 15 Jul 2025 09:48:54 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-15-invocation-of-transactional-proxy-objects/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;事务代理对象生成完成后，现在了解下代理对象的触发流程。&lt;/p&gt;
&lt;h3 id="二流程图"&gt;二、流程图&lt;/h3&gt;
&lt;p&gt;这里的事务代理对象依旧是依托于 &lt;a href="https://ongoingblog.org/2025/05/2025-05-27-proxy-object-invocation/"&gt;aop 代理对象触发&lt;/a&gt;的，事务的处理具体在&lt;code&gt;org.springframework.transaction.interceptor.TransactionInterceptor&lt;/code&gt;中。&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-15-invocation-of-transactional-proxy-objects/transactioninterceptor_hierarchy.png"
 class="image-loading-container"
 
 data-pswp-width="3200"
 data-pswp-height="2264"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-15-invocation-of-transactional-proxy-objects/transactioninterceptor_hierarchy.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 class="lazy-image"
 
 width="3200"
 height="2264"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h4 id="一jdk-事务代理对象触发"&gt;（一）JDK 事务代理对象触发&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-15-invocation-of-transactional-proxy-objects/spring_process-transaction-aop-jdk-proxy-invocation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-15-invocation-of-transactional-proxy-objects/spring_process-transaction-aop-jdk-proxy-invocation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>事务代理对象的创建</title><link>https://ongoingblog.org/2025/07/2025-07-15-creation-of-transactional-proxy-objects/</link><pubDate>Tue, 15 Jul 2025 09:48:21 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-15-creation-of-transactional-proxy-objects/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;为什么保证专注点的聚焦？&lt;/p&gt;
&lt;p&gt;我这边只针对 dao 层的被调用的方法所在的类进行观察。&lt;/p&gt;
&lt;p&gt;只去观察这个类的一个表现和行为，至于其他一些基础设施类的 bean，虽然在这个过程中也有受到牵扯，我这里就先不展开说明。&lt;/p&gt;
&lt;p&gt;也就是说，这里聚焦于框架为 UserDao 这个接口生成对应的代理对象。&lt;/p&gt;
&lt;p&gt;如何去根据事务注解去定位并且生成代理对象的？&lt;/p&gt;
&lt;p&gt;单一事务（无嵌套事务）&lt;/p&gt;
&lt;p&gt;嵌套事务&lt;/p&gt;
&lt;p&gt;注解的解析、生成事务属性。&lt;/p&gt;
&lt;h3 id="二步骤"&gt;二、步骤&lt;/h3&gt;
&lt;p&gt;准备好事务各组件的过程。&lt;/p&gt;
&lt;h4 id="一事务代理对象的创建"&gt;（一）事务代理对象的创建&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-15-creation-of-transactional-proxy-objects/spring_process-proxy-object-creation_20250812.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-15-creation-of-transactional-proxy-objects/spring_process-proxy-object-creation_20250812.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h4 id="二事务代理对象的创建---甬道图"&gt;（二）事务代理对象的创建 - 甬道图&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-15-creation-of-transactional-proxy-objects/spring_process-proxy-object-creation-corridor-diagram_20250812.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-15-creation-of-transactional-proxy-objects/spring_process-proxy-object-creation-corridor-diagram_20250812.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>JVM metaspace（元空间）</title><link>https://ongoingblog.org/2025/07/2025-07-13-jvm-metaspace/</link><pubDate>Sun, 13 Jul 2025 11:44:42 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-13-jvm-metaspace/</guid><description>&lt;p&gt;元空间共享字节码（可回收）&lt;/p&gt;
&lt;p&gt;意图：存储类的元信息。&lt;/p&gt;
&lt;h3&gt;&lt;a href="https://stuefe.de/posts/metaspace/what-is-metaspace/"target="_blank" rel="noopener noreferrer"&gt;https://stuefe.de/posts/metaspace/what-is-metaspace/&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;类的元信息。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas01.png"
 class="image-loading-container"
 
 data-pswp-width="1224"
 data-pswp-height="190"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas01.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1224"
 height="190"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;类元信息不是 java 对象，不在 Java 堆中：&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas02.png"
 class="image-loading-container"
 
 data-pswp-width="2010"
 data-pswp-height="288"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas02.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="2010"
 height="288"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;何时被释放：&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas03.png"
 class="image-loading-container"
 
 data-pswp-width="2112"
 data-pswp-height="328"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas03.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="2112"
 height="328"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;类下没有任何实例&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas04.png"
 class="image-loading-container"
 
 data-pswp-width="2188"
 data-pswp-height="224"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/Thomas04.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="2188"
 height="224"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;被释放的空间通常会被保留，并不会归还给 OS。&lt;/p&gt;
&lt;p&gt;设置空间大小的两个参数&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;参数名&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;-XX:MaxMetaspaceSize&lt;/td&gt;
 &lt;td&gt;Metaspace 最大空间。默认无限制&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;-XX:CompressedClassSpaceSize&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;metaspace 分为两块&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/class_and_nonclass_space.png"
 class="image-loading-container"
 
 data-pswp-width="782"
 data-pswp-height="404"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-13-jvm-metaspace/images/class_and_nonclass_space.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="782"
 height="404"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;metaspace&lt;/p&gt;</description></item><item><title>Spring 框架历史</title><link>https://ongoingblog.org/2025/07/2025-07-04-history-of-spring-framework/</link><pubDate>Fri, 04 Jul 2025 17:56:43 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-04-history-of-spring-framework/</guid><description>&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-04-history-of-spring-framework/history_of_spring_framework.png"
 class="image-loading-container"
 
 data-pswp-width="1600"
 data-pswp-height="2920"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-04-history-of-spring-framework/history_of_spring_framework.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1600"
 height="2920"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="参考"&gt;参考&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.ityouknow.com/springboot/2019/01/03/spring-pivotal.html"target="_blank" rel="noopener noreferrer"&gt;http://www.ityouknow.com/springboot/2019/01/03/spring-pivotal.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.quickprogrammingtips.com/spring-boot/history-of-spring-framework-and-spring-boot.html"target="_blank" rel="noopener noreferrer"&gt;https://www.quickprogrammingtips.com/spring-boot/history-of-spring-framework-and-spring-boot.html&lt;/a&gt;&lt;/p&gt;</description></item><item><title>$Proxy29@123 JDK 代理对象名称生成逻辑</title><link>https://ongoingblog.org/2025/07/2025-07-03-jdk-proxy-object-name-generation-logic/</link><pubDate>Thu, 03 Jul 2025 14:41:42 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-03-jdk-proxy-object-name-generation-logic/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;spring 在给接口生成代理对象时，会使用 jdk 内置的动态代理，生成的代理对象名称形如&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-03-jdk-proxy-object-name-generation-logic/proxy_instance_name.png"
 class="image-loading-container"
 
 data-pswp-width="623"
 data-pswp-height="103"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-03-jdk-proxy-object-name-generation-logic/proxy_instance_name.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="623"
 height="103"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;这里来定位下对应的逻辑是在哪里。&lt;/p&gt;
&lt;h3 id="二名称生成的逻辑"&gt;二、名称生成的逻辑&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-03-jdk-proxy-object-name-generation-logic/name_generation_logic.png"
 class="image-loading-container"
 
 data-pswp-width="971"
 data-pswp-height="2729"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-03-jdk-proxy-object-name-generation-logic/name_generation_logic.png?format=webp&amp;amp;quality=85"
 alt=""
 class="lazy-image"
 
 width="971"
 height="2729"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>优雅停</title><link>https://ongoingblog.org/2025/07/2025-07-03-graceful-shutdown/</link><pubDate>Thu, 03 Jul 2025 10:37:21 +0800</pubDate><guid>https://ongoingblog.org/2025/07/2025-07-03-graceful-shutdown/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一配置的读取"&gt;一、配置的读取&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二web-server-的初始化"&gt;二、web server 的初始化&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三测试案例的搭建"&gt;三、测试案例的搭建&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h3 id="一配置的读取"&gt;一、配置的读取&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-07-03-graceful-shutdown/graceful_shutdown_config.png"
 class="image-loading-container"
 
 data-pswp-width="2015"
 data-pswp-height="1629"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-07-03-graceful-shutdown/graceful_shutdown_config.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="2015"
 height="1629"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="二web-server-的初始化"&gt;二、web server 的初始化&lt;/h3&gt;
&lt;p&gt;执行优雅停源码位置：&lt;code&gt;org.springframework.boot.web.embedded.tomcat.GracefulShutdown#doShutdown&lt;/code&gt;&lt;/p&gt;</description></item><item><title>类加载</title><link>https://ongoingblog.org/2025/06/2025-06-27-class-load/</link><pubDate>Fri, 27 Jun 2025 18:23:44 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-27-class-load/</guid><description>&lt;p&gt;所谓的双亲委派，其实没有双亲。英文叫作 parent delegation。&lt;/p&gt;
&lt;p&gt;这里的双亲委派其实就是把加载类的任务委托给父加载器。&lt;/p&gt;
&lt;p&gt;流程图：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-27-class-load/jdk-loadClass.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-27-class-load/jdk-loadClass.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;p&gt;如果一个类加载器收到了类加载的请求，它首先不会自己去加载这个类，而是把这个请求委派给父类加载器去完成，每一层的类加载器都是如此，这样所有的加载请求都会被传送到顶层的启动类加载器中，只有当父加载无法完成加载请求（它的搜索范围中没找到所需的类）时，子加载器才会尝试去加载类。&lt;/p&gt;
&lt;p&gt;为什么要进行委派？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;防止用户自定义的类替换 Java 核心类&lt;/li&gt;
&lt;li&gt;避免重复加载&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="类加载和-spring-容器查找的顺序"&gt;类加载和 spring 容器查找的顺序&lt;/h3&gt;</description></item><item><title>underlying 单词的翻译</title><link>https://ongoingblog.org/2025/06/2025-06-24-underlying/</link><pubDate>Tue, 24 Jun 2025 10:48:37 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-24-underlying/</guid><description>&lt;p&gt;我把含有这个单词的句子输入到 deepseek 中去后，发现对应的翻译都是如“底层的&amp;hellip;”。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-24-underlying/underlying_in_spring_source_code.png"
 class="image-loading-container"
 
 data-pswp-width="905"
 data-pswp-height="618"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-24-underlying/underlying_in_spring_source_code.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="905"
 height="618"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>注解 @Bean</title><link>https://ongoingblog.org/2025/06/2025-06-18-at-bean-annotation/</link><pubDate>Wed, 18 Jun 2025 19:16:20 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-18-at-bean-annotation/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一背景"&gt;一、背景&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二bean"&gt;二、@Bean&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三生命周期"&gt;三、生命周期&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#四bean-名称"&gt;四、bean 名称&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#五使用场景"&gt;五、使用场景&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;这篇文章来看类：&lt;code&gt;org.springframework.context.annotation.Bean&lt;/code&gt;。&lt;/p&gt;</description></item><item><title>单例双重检查锁定 DCL</title><link>https://ongoingblog.org/2025/06/2025-06-17-singleton/</link><pubDate>Tue, 17 Jun 2025 15:00:51 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-17-singleton/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;这里复习一下单例创建时的双重检查。&lt;/p&gt;
&lt;h3 id="二类的构造函数私有化"&gt;二、类的构造函数私有化&lt;/h3&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;A&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;注意，A 类的构造函数虽然私有化了，但是从内部还是可以进行 new 的，外部不可以。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;INSTANCE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 可以从内部进行 new&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;A&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三双锁检测-double-checked-locking"&gt;三、双锁检测 (double-checked locking)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SingletonDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// volatile 防止指令重排序，并且保证变更对于其他线程可见。&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;volatile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SingletonDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;SingletonDemo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SingletonDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getInstance&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 加锁前判断一次，防止不必要的加锁，缩小锁的范围&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;synchronized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SingletonDemo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 预防其他线程也创建了实例，再次判断&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SingletonDemo&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里的&lt;/p&gt;</description></item><item><title>Arthas</title><link>https://ongoingblog.org/2025/06/2025-06-13-arthas/</link><pubDate>Fri, 13 Jun 2025 15:32:07 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-13-arthas/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://arthas.aliyun.com/"target="_blank" rel="noopener noreferrer"&gt;Arthas&lt;/a&gt;是阿里出的一款 Java 应用监控诊断的工具。&lt;/p&gt;
&lt;p&gt;下面是官方文档中简述它可以起到的作用


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-13-arthas/arthas_effect.png"
 class="image-loading-container"
 
 data-pswp-width="672"
 data-pswp-height="278"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-13-arthas/arthas_effect.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="672"
 height="278"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;p&gt;我记得之前公司有人用它来介绍火焰图。&lt;/p&gt;
&lt;h3 id="二如何查看代理类的源码"&gt;二、如何查看代理类的源码&lt;/h3&gt;
&lt;p&gt;找到对应的代理类后，直接执行命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;jad 代理类名称
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三如何快速找到我想要定位的代理类所在进程-todo"&gt;三、如何快速找到我想要定位的代理类所在进程 todo&lt;/h3&gt;
&lt;h3 id="四在-idea-中如何看到当前运行的应用进程名-todo"&gt;四、在 IDEA 中如何看到当前运行的应用进程名 todo&lt;/h3&gt;
&lt;h3 id="三如何查看生成的-lambda-源码-todo"&gt;三、如何查看生成的 lambda 源码 todo&lt;/h3&gt;
&lt;h3 id="四一些命令"&gt;四、一些命令&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;命令&lt;/th&gt;
 &lt;th&gt;备注&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;sc&lt;/td&gt;
 &lt;td&gt;search class 搜索类信息&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;sm&lt;/td&gt;
 &lt;td&gt;search method 搜素类中方法信息&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;stop/shutdown&lt;/td&gt;
 &lt;td&gt;关闭所有会话，停止 arthas 运行。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;quit&lt;/td&gt;
 &lt;td&gt;关闭当前会话，但是 arthas 还在运行&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ctrl + d&lt;/td&gt;
 &lt;td&gt;当前的会话还是在运行之中的&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;jad&lt;/td&gt;
 &lt;td&gt;找到代理类，这个命令可以反编译，看源代码&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title>Java 命令：jps</title><link>https://ongoingblog.org/2025/06/2025-06-12-java-jps/</link><pubDate>Thu, 12 Jun 2025 12:55:53 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-12-java-jps/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;jps(JVM Process Status Tool): java 自带的命令行工具。可以展示当前系统正在运行的 Java 进程信息。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-12-java-jps/jps_exec.png"
 class="image-loading-container"
 
 data-pswp-width="342"
 data-pswp-height="148"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-12-java-jps/jps_exec.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="342"
 height="148"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="二功能"&gt;二、功能&lt;/h3&gt;
&lt;div class="table-left"&gt;
 &lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;命令&lt;/th&gt;
 &lt;th&gt;备注&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;jps&lt;/td&gt;
 &lt;td&gt;进程 id 主类名&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;jps -l&lt;/td&gt;
 &lt;td&gt;进程 id 全限定类名&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;jps -q&lt;/td&gt;
 &lt;td&gt;只有进程 id&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;

&lt;/div&gt;

&lt;style&gt;
 .table-left table {
 margin-left: 0 !important;
 margin-right: auto;
 }
&lt;/style&gt;</description></item><item><title>Idea 下载依赖包失败，attatch source 也失败</title><link>https://ongoingblog.org/2025/06/2025-06-12-idea-can-not-see-source-code-about-enhancer/</link><pubDate>Thu, 12 Jun 2025 10:15:04 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-12-idea-can-not-see-source-code-about-enhancer/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;IDEA 看到下面这段代码&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;时&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;protected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Enhancer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;createEnhancer&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Enhancer&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;点进 Enhancer 中，显示的是 Enhancer.class 文件，我想要看源文件，IDEA 上有显示 download，但是也是失败的 (下图所示)。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-12-idea-can-not-see-source-code-about-enhancer/problem.png"
 class="image-loading-container"
 
 data-pswp-width="979"
 data-pswp-height="414"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-12-idea-can-not-see-source-code-about-enhancer/problem.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="979"
 height="414"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="二解决方案"&gt;二、解决方案&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-12-idea-can-not-see-source-code-about-enhancer/solution.png"
 class="image-loading-container"
 
 data-pswp-width="1016"
 data-pswp-height="762"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-12-idea-can-not-see-source-code-about-enhancer/solution.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1016"
 height="762"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="三后语"&gt;三、后语&lt;/h3&gt;
&lt;p&gt;但是我发现每次重新编译完 spring 源码后，我都需要重新去 attach 这个类的源码。&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;org.springframework.aop.framework.CglibAopProxy#createEnhancer&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Jetbrains Toolbox</title><link>https://ongoingblog.org/2025/06/2025-06-11-jetbrains-toolbox/</link><pubDate>Wed, 11 Jun 2025 23:44:39 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-11-jetbrains-toolbox/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;发现 IDEA 又出了新版本了。
之前每次更新编程软件新版本的做法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;去 jetbrains 官网找到最新版本的安装包&lt;/li&gt;
&lt;li&gt;全量下载安装包&lt;/li&gt;
&lt;li&gt;本地安装时会覆盖掉旧版本&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;询问了下 ai 工具，发现了 jetbrains 有一个专门用来管理更新的小工具叫作&lt;a href="https://www.jetbrains.com/toolbox-app/"target="_blank" rel="noopener noreferrer"&gt;JetBrains Toolbox App&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id="二jetbrains-toolbox-app"&gt;二、JetBrains Toolbox App&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-11-jetbrains-toolbox/toolbox.png"
 class="image-loading-container"
 
 data-pswp-width="1283"
 data-pswp-height="742"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-11-jetbrains-toolbox/toolbox.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1283"
 height="742"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;如上图，这是它的样子，直接下载安装后。&lt;/p&gt;
&lt;p&gt;应用再有更新就可以直接用它了，并且可以设置后台自动更新。
优点是&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;每次升级下载是 patch 安装包，而非全量的安装包，更快&lt;/li&gt;
&lt;li&gt;可以管理所有 jetbrains 旗下的软件&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>接口的默认方法</title><link>https://ongoingblog.org/2025/06/2025-06-05-interface-default-method/</link><pubDate>Thu, 05 Jun 2025 11:16:05 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-05-interface-default-method/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;例如这个场景&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;最开始，你写了一个接口TestInterface这个接口中没有声明任何方法，是一个空接口&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;TestInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;你根据这个空接口有一个实现类TestInterfaceImpl&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TestInterfaceImpl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TestInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 因为接口中没有声明任何方法，所以实现类自然也没有。&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;陆陆续续这个接口下面实现了很多很多类。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;现在想要对这个接口添加方法。如果在接口TestInterface中直接添加方法声明，会强制下面所有实现类全部都要实现方法&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;TestInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;methodA&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 给接口添加方法声明，实现类TestInterfaceImpl也需要实现此方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用 default 关键在接口中去声明方法，不会影响到先有实现类的功能&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;TestInterface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;newExec&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="二优点"&gt;二、优点&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;向后兼容，不会导致兼容性的问题。已有的实现类无需实现此方法，可正常工作。&lt;/li&gt;
&lt;li&gt;符合开闭原则：对扩展开放，对修改关闭。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="三现有框架例子"&gt;三、现有框架例子&lt;/h3&gt;
&lt;p&gt;直接在spring源码中搜索default关键字的接口，你会发现很多这样使用的例子。最开始就是普通接口及接口方法的声明，后面有default关键字声明的方法。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-05-interface-default-method/spring_interface_default_method.png"
 class="image-loading-container"
 
 data-pswp-width="1017"
 data-pswp-height="748"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-05-interface-default-method/spring_interface_default_method.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1017"
 height="748"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>标记接口</title><link>https://ongoingblog.org/2025/06/2025-06-05-marker-interface/</link><pubDate>Thu, 05 Jun 2025 10:59:26 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-05-marker-interface/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;在 spring 源码中遇到的空方法的接口，有些奇怪，因为一般接口都是行为的契约，但是这些接口都是空接口，里面没有任何方法的定义。&lt;/p&gt;
&lt;h3 id="二释义"&gt;二、释义&lt;/h3&gt;
&lt;p&gt;表示实现类具有某种特性或者能力，可以用作一种能力标识。&lt;/p&gt;
&lt;p&gt;最开始可以为空方法，后续如果想要添加，可以使用&lt;a href="https://ongoingblog.org/2025/06/2025-06-05-interface-default-method/"&gt;接口的默认方法&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id="三spring-中例子"&gt;三、Spring 中例子&lt;/h3&gt;
&lt;p&gt;在源码中搜索关键词 &lt;code&gt;marker interface&lt;/code&gt;:&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-05-marker-interface/marker_interface_in_spring.png"
 class="image-loading-container"
 
 data-pswp-width="905"
 data-pswp-height="618"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-05-marker-interface/marker_interface_in_spring.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="905"
 height="618"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;



















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-05-marker-interface/afteradvice.png"
 class="image-loading-container"
 
 data-pswp-width="715"
 data-pswp-height="233"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-05-marker-interface/afteradvice.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="715"
 height="233"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;



















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-05-marker-interface/springproxy.png"
 class="image-loading-container"
 
 data-pswp-width="693"
 data-pswp-height="253"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-05-marker-interface/springproxy.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="693"
 height="253"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>JDK Proxy 流程</title><link>https://ongoingblog.org/2025/06/2025-06-05-jdk-proxy-process/</link><pubDate>Thu, 05 Jun 2025 10:14:54 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-05-jdk-proxy-process/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;展示 jdk 动态代理的流程。&lt;/p&gt;
&lt;h3 id="二流程图"&gt;二、流程图&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-05-jdk-proxy-process/spring_process-aoo-jdk-proxy-creation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-05-jdk-proxy-process/spring_process-aoo-jdk-proxy-creation.svg"
 alt="jdk 动态代理"
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 &lt;figcaption style="text-align: center;"&gt;jdk 动态代理&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id="三测试代码"&gt;三、测试代码&lt;/h3&gt;
&lt;p&gt;&lt;a href="aopdemo_jdk/AopTest.java"&gt;AopTest.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_jdk/Application.java"&gt;Application.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_jdk/DemoInterface.java"&gt;DemoInterface.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_jdk/DemoService.java"&gt;DemoService.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_jdk/ServiceAspect.java"&gt;ServiceAspect.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里的程序都是标准 bean 的生成路径，没有走&lt;code&gt;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory#resolveBeforeInstantiation&lt;/code&gt;中的 short-cut 路径（流程图中菱形左侧分支的自定义场景）。&lt;/p&gt;</description></item><item><title>CGLIB Proxy 流程</title><link>https://ongoingblog.org/2025/06/2025-06-04-code-generation-library/</link><pubDate>Wed, 04 Jun 2025 14:16:18 +0800</pubDate><guid>https://ongoingblog.org/2025/06/2025-06-04-code-generation-library/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;展示 cglib 生成代理对象流程。&lt;/p&gt;
&lt;p&gt;CGLIB 是一个常用的字节码生成器的类库。
提供的功能：生成和转换 Java 字节码。&lt;/p&gt;
&lt;p&gt;CGLIB 可以覆盖 final 方法&lt;/p&gt;
&lt;p&gt;技术背景：在 Java 早期，动态代理主要依赖 JDK 原生的 java.lang.reflect.Proxy，但该机制仅支持接口代理，无法直接代理普通类。CGLIB 则通过字节码生成技术（基于 ASM 框架），实现了对类的代理，弥补了 JDK 代理的局限性。&lt;/p&gt;
&lt;p&gt;如果目标类没有实现接口，spring 会强制使用 CGLIB&lt;/p&gt;
&lt;p&gt;代理对象和目标对象如何产生联系？&lt;/p&gt;
&lt;h3 id="二流程图"&gt;二、流程图&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-06-04-code-generation-library/spring_process-aoo-cglib-proxy-creation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-06-04-code-generation-library/spring_process-aoo-cglib-proxy-creation.svg"
 alt="cglib 动态代理"
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 &lt;figcaption style="text-align: center;"&gt;cglib 动态代理&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3 id="三测试代码"&gt;三、测试代码&lt;/h3&gt;
&lt;p&gt;&lt;a href="aopdemo_cglib/AopTest.java"&gt;AopTest.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_cglib/Application.java"&gt;Application.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_cglib/DemoService.java"&gt;DemoService.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="aopdemo_cglib/ServiceAspect.java"&gt;ServiceAspect.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里的程序都是标准 bean 的生成路径，没有走&lt;code&gt;org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory#resolveBeforeInstantiation&lt;/code&gt;中的 short-cut 路径（流程图中菱形左侧分支的自定义场景）。&lt;/p&gt;</description></item><item><title>隐式继承</title><link>https://ongoingblog.org/2025/05/2025-05-28-implicit-inheritance/</link><pubDate>Wed, 28 May 2025 10:45:01 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-28-implicit-inheritance/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;今天看到&lt;code&gt;org.springframework.beans.factory.ObjectFactory#getObject&lt;/code&gt;抛出的&lt;code&gt;org. springframework.beans.BeansException&lt;/code&gt;，我一直往上找到&lt;code&gt;Throwable &lt;/code&gt;，往右侧看父类和子类的结构时，发现这个类代码中并没有去写继承Object，但是右侧层次结构中却有Object


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-28-implicit-inheritance/object.png"
 class="image-loading-container"
 
 data-pswp-width="903"
 data-pswp-height="293"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-28-implicit-inheritance/object.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="903"
 height="293"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;p&gt;搜了一下，这种叫作隐式继承，突然想起很久之前看到java书中基本概念确实说过这个东西。&lt;/p&gt;
&lt;h3 id="二概念"&gt;二、概念&lt;/h3&gt;
&lt;p&gt;隐式继承是指一个类没有使用&lt;code&gt;extends&lt;/code&gt;关键字显示指定父类时，会自动继承&lt;code&gt;java.lang.Object&lt;/code&gt;的机制。确保所有类都有一个共同的根。&lt;/p&gt;
&lt;p&gt;在Object类中，有这样一段注释&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-28-implicit-inheritance/object_comment.png"
 class="image-loading-container"
 
 data-pswp-width="521"
 data-pswp-height="214"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-28-implicit-inheritance/object_comment.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="521"
 height="214"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;随便找个类进行验证下&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-28-implicit-inheritance/sample.png"
 class="image-loading-container"
 
 data-pswp-width="886"
 data-pswp-height="364"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-28-implicit-inheritance/sample.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="886"
 height="364"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="三注意"&gt;三、注意&lt;/h3&gt;
&lt;p&gt;接口不会继承Object，但是接口的实现类会继承。&lt;/p&gt;</description></item><item><title>代理对象的触发</title><link>https://ongoingblog.org/2025/05/2025-05-27-proxy-object-invocation/</link><pubDate>Tue, 27 May 2025 15:50:55 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-27-proxy-object-invocation/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;代理对象生成完成后，现在了解下代理对象的触发流程。&lt;/p&gt;
&lt;h3 id="二流程图"&gt;二、流程图&lt;/h3&gt;
&lt;p&gt;触发的主要流程 JDK 和 CGLIB 都是相同的，主要步骤就在&lt;code&gt;org.springframework.aop.framework.ReflectiveMethodInvocation#proceed&lt;/code&gt;中。&lt;/p&gt;
&lt;h4 id="一jdk-代理对象触发"&gt;（一）JDK 代理对象触发&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-27-proxy-object-invocation/spring_process-aoo-jdk-proxy-invocation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-27-proxy-object-invocation/spring_process-aoo-jdk-proxy-invocation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h4 id="二cglib-代理对象触发"&gt;（二）CGLIB 代理对象触发&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-27-proxy-object-invocation/spring_process-aoo-cglib-proxy-invocation.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-27-proxy-object-invocation/spring_process-aoo-cglib-proxy-invocation.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>代理对象的创建</title><link>https://ongoingblog.org/2025/05/2025-05-27-proxy-object-creatation/</link><pubDate>Tue, 27 May 2025 15:25:19 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-27-proxy-object-creatation/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一背景"&gt;一、背景&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二创建入口-时段run-time"&gt;二、创建入口 (时段：run-time)&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三自动生成的代理对象的结构"&gt;三、自动生成的代理对象的结构&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#四名称逻辑"&gt;四、名称逻辑&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#五问题目标对象的代理对象创建了之后目标对象还会去创建吗"&gt;五、问题：目标对象的代理对象创建了之后，目标对象还会去创建吗？&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#六annotationawareaspectjautoproxycreator"&gt;六、AnnotationAwareAspectJAutoProxyCreator&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#七问题如何判断一个-bean-是否需要生成代理对象"&gt;七、问题：如何判断一个 bean 是否需要生成代理对象？&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#八问题getbean-获取代理对象的过程是怎样的"&gt;八、问题：getBean() 获取代理对象的过程是怎样的？&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;了解 Spring AOP 的代理对象的创建流程。&lt;/p&gt;</description></item><item><title>lambda 表达式生成的类是 final 的</title><link>https://ongoingblog.org/2025/05/2025-05-27-lambda-class-is-final/</link><pubDate>Tue, 27 May 2025 13:48:36 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-27-lambda-class-is-final/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;在看 aop 创建方法&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;时，代码中第三个判断条件&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-27-lambda-class-is-final/third_condition.png"
 class="image-loading-container"
 
 data-pswp-width="863"
 data-pswp-height="67"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-27-lambda-class-is-final/third_condition.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="863"
 height="67"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;ClassUtils.isLambdaClass(targetClass)&lt;/code&gt;说 lambda 表达式生成的类是 final，不能被继承，所以强制得用 JDK 动态代理。&lt;/p&gt;
&lt;p&gt;这里用例子检查 lambda 生成的类是否是 final 的。&lt;/p&gt;
&lt;h3 id="二代码"&gt;二、代码&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LamdbaFinalDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lambda&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;test&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;extends&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;aClass&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lambda&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;====&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;isFinal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Modifier&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isFinal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aClass&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getModifiers&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;isFinal: &amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;isFinal&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aClass&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;结果&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-27-lambda-class-is-final/result.png"
 class="image-loading-container"
 
 data-pswp-width="635"
 data-pswp-height="71"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-27-lambda-class-is-final/result.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="635"
 height="71"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="三为什么生成的类是-final-的"&gt;三、为什么生成的类是 final 的？&lt;/h3&gt;
&lt;p&gt;为了确保 不可变性和安全性，JVM 会将生成的类标记为 final，防止其他代码继承或修改其行为。&lt;/p&gt;</description></item><item><title>Advice的类型</title><link>https://ongoingblog.org/2025/05/2025-05-27-advice-type/</link><pubDate>Tue, 27 May 2025 11:42:31 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-27-advice-type/</guid><description>&lt;p&gt;主要展示Advice发生作用的5种类型的类和接口的关系：&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-27-advice-type/spring_process-aop_advice.png"
 class="image-loading-container"
 
 data-pswp-width="6008"
 data-pswp-height="3848"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-27-advice-type/spring_process-aop_advice.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt="aop advice"
 class="lazy-image"
 
 width="6008"
 height="3848"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 &lt;figcaption style="text-align: center;"&gt;aop advice&lt;/figcaption&gt;
&lt;/figure&gt;</description></item><item><title>代码中的注释</title><link>https://ongoingblog.org/2025/05/2025-05-22-comment-in-source-code/</link><pubDate>Thu, 22 May 2025 11:26:23 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-22-comment-in-source-code/</guid><description>&lt;p&gt;&lt;code&gt;为什么去做&lt;/code&gt;和&lt;code&gt;怎么做&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;注释最佳实践：&lt;/p&gt;
&lt;p&gt;1、优先让代码去解释
通过命名、函数去解释
代码就是注释。&lt;/p&gt;
&lt;p&gt;2、关注为什么，而非怎么做
写这段代码的目的是什么?
这么写的目的是什么。&lt;/p&gt;
&lt;p&gt;3、不要用注释去一对一地对代码进行翻译，这种没有必要，只会消耗读者的精力&lt;/p&gt;
&lt;p&gt;怎么去做：这个直接让代码去直观地展示即可，不要冗余再去使用注释&lt;/p&gt;
&lt;p&gt;需要有意识的去注意到这些。&lt;/p&gt;</description></item><item><title>EnhancerBySpringCGLIB</title><link>https://ongoingblog.org/2025/05/2025-05-22-enhancerbyspringcglib/</link><pubDate>Thu, 22 May 2025 10:35:12 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-22-enhancerbyspringcglib/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;在 IDEA debug 窗口中看到了这样的标识符号：&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-22-enhancerbyspringcglib/EnhancerBySpringCGLIB.png"
 class="image-loading-container"
 
 data-pswp-width="1012"
 data-pswp-height="361"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-22-enhancerbyspringcglib/EnhancerBySpringCGLIB.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1012"
 height="361"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;如果一个类名是这个样子的，表示这个类是由 CGLIB 库生成的。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$$&lt;/code&gt;符号是 CGLIB 生成的类的分隔符：&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-22-enhancerbyspringcglib/cglib_class_separator.png"
 class="image-loading-container"
 
 data-pswp-width="521"
 data-pswp-height="82"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-22-enhancerbyspringcglib/cglib_class_separator.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="521"
 height="82"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="二生成的代理类命名规则"&gt;二、生成的代理类命名规则&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;原始类名 + $$EnhancerBySpringCGLIB$$ + 随机哈希值
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三生成名称的源码逻辑"&gt;三、生成名称的源码逻辑&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-22-enhancerbyspringcglib/DefaultNamingPolicy.png"
 class="image-loading-container"
 
 data-pswp-width="819"
 data-pswp-height="3237"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-22-enhancerbyspringcglib/DefaultNamingPolicy.png?format=webp&amp;amp;quality=85"
 alt="生成 CGLIB 代理类的名称逻辑"
 class="lazy-image"
 
 width="819"
 height="3237"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 &lt;figcaption style="text-align: center;"&gt;生成 CGLIB 代理类的名称逻辑&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;最后一张图片里需要去 github 上下载 CGLIB 的仓库查看下对应的源码。&lt;/p&gt;</description></item><item><title>IDEA 反编译</title><link>https://ongoingblog.org/2025/05/2025-05-21-idea-decompile/</link><pubDate>Wed, 21 May 2025 14:01:31 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-21-idea-decompile/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;想要查看 jdk 动态代理生成的代理类或者 cglib 生成的代理类，找个工具。&lt;/p&gt;
&lt;h3 id="二工具"&gt;二、工具&lt;/h3&gt;
&lt;p&gt;直接使用 &lt;a href="https://ongoingblog.org/2025/06/2025-06-13-arthas/"&gt;Arthas&lt;/a&gt; 工具就很方便。&lt;/p&gt;</description></item><item><title>一个 AOP 的简单例子，用作源码触发入口</title><link>https://ongoingblog.org/2025/05/2025-05-20-aop-best-practice/</link><pubDate>Tue, 20 May 2025 13:43:20 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-20-aop-best-practice/</guid><description>&lt;p&gt;AopTest.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AopTest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;testAop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Application&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 获取代理对象&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DemoService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;demoService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DemoService&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 触发切面方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;demoService&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;save&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Application.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Configuration&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@ComponentScan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;mine.projects.aopdemo_cglib&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@EnableAspectJAutoProxy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;proxyTargetClass&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Application&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;DemoService.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Service&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DemoService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Save run&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ServiceAspect.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Aspect&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Component&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ServiceAspect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Before&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;execution(public * mine.projects.aopdemo_cglib.DemoService.*(..))&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;beforePrint&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;before run...&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行结果：&lt;/p&gt;</description></item><item><title>Advisor的翻译</title><link>https://ongoingblog.org/2025/05/2025-05-19-advisor-translation/</link><pubDate>Mon, 19 May 2025 17:59:24 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-19-advisor-translation/</guid><description>&lt;p&gt;在最近看的一本书中，将 Advisor 翻译为&lt;code&gt;增强器&lt;/code&gt;，但是spring文档里翻译是&lt;code&gt;通知器&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;问了下deepseek，回复是按spring文档中来的。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-19-advisor-translation/advisor.png"
 class="image-loading-container"
 
 data-pswp-width="1664"
 data-pswp-height="728"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-19-advisor-translation/advisor.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1664"
 height="728"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>Spring 循环依赖（两个 bean 之间） - 基于构造器</title><link>https://ongoingblog.org/2025/05/2025-05-14-spring-circular-dependency-constructor/</link><pubDate>Wed, 14 May 2025 19:26:07 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-14-spring-circular-dependency-constructor/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;基于构造器的循环依赖。&lt;/p&gt;
&lt;h3 id="二流程图"&gt;二、流程图&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency-constructor/process.png"
 class="image-loading-container"
 
 data-pswp-width="576"
 data-pswp-height="520"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency-constructor/process.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="576"
 height="520"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;



















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency-constructor/code_debug.png"
 class="image-loading-container"
 
 data-pswp-width="3680"
 data-pswp-height="1928"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency-constructor/code_debug.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="3680"
 height="1928"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="三测试程序"&gt;三、测试程序&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;com.ongoing.demo.circular_dependency.constructor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.context.annotation.AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ApplicationDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;applicationContext&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;com.ongoing.demo.circular_dependency.constructor&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;com.ongoing.demo.circular_dependency.construct&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Component&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Cat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Person&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;person&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;com.ongoing.demo.circular_dependency.construct&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Component&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Person&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Person&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;应用运行结果&lt;/p&gt;</description></item><item><title>Spring 循环依赖（两个 bean 之间） - 基于@Autowired</title><link>https://ongoingblog.org/2025/05/2025-05-14-spring-circular-dependency/</link><pubDate>Wed, 14 May 2025 13:53:58 +0800</pubDate><guid>https://ongoingblog.org/2025/05/2025-05-14-spring-circular-dependency/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency/img.png"
 class="image-loading-container"
 
 data-pswp-width="534"
 data-pswp-height="289"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency/img.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="534"
 height="289"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Spring 循环依赖：两个或多个 bean 之间互相引用。
例如 Person 类中有 Cat 类的引用，Cat 类中有 Person 类的引用。&lt;/p&gt;
&lt;p&gt;多 debug 几遍，孰能生巧，越来越快。&lt;/p&gt;
&lt;h3 id="二流程图"&gt;二、流程图&lt;/h3&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency/spring_process-cat_person.png"
 class="image-loading-container"
 
 data-pswp-width="1638"
 data-pswp-height="1276"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-14-spring-circular-dependency/spring_process-cat_person.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt="循环依赖流程图"
 class="lazy-image"
 
 width="1638"
 height="1276"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 &lt;figcaption style="text-align: center;"&gt;循环依赖流程图&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;解决循环依赖的关键就在于 singletonFactories 这个第三级缓存。它存放的是半成品的 bean，未进行属性赋值和依赖注入的 bean。&lt;/p&gt;
&lt;h3 id="三测试程序"&gt;三、测试程序&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;com.ongoing.demo.circular_dependency.autowired&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.context.annotation.AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * @description 测试循环依赖 基于注解类型的
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ApplicationDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;applicationContext&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AnnotationConfigApplicationContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;com.ongoing.demo.circular_dependency.autowired&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;com.ongoing.demo.circular_dependency.autowired&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.beans.factory.annotation.Autowired&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Component&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Autowired&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Person&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;person&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;com.ongoing.demo.circular_dependency.autowired&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.beans.factory.annotation.Autowired&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.springframework.stereotype.Component&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Component&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Person&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Autowired&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="四注意"&gt;四、注意&lt;/h3&gt;
&lt;p&gt;Spring 只解决单例作用域下的属性注入循环依赖，构造器注入和原型作用域的循环依赖无法自动解决，会抛出异常。&lt;/p&gt;</description></item><item><title>IOC容器的文件扫描顺序</title><link>https://ongoingblog.org/2025/05/ioc-container-init-sequence/</link><pubDate>Fri, 09 May 2025 10:43:08 +0800</pubDate><guid>https://ongoingblog.org/2025/05/ioc-container-init-sequence/</guid><description>&lt;p&gt;先说下最终形成的顺序：按文件名称（例如&lt;code&gt;cat.class&lt;/code&gt;）进行升序排序的。&lt;/p&gt;
&lt;p&gt;源码入口位置：&lt;code&gt;org.springframework.context.annotation.AnnotationConfigApplicationContext#scan&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;代码逻辑























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-09-ioc-container-init-sequence/scan_process.png"
 class="image-loading-container"
 
 data-pswp-width="928"
 data-pswp-height="5419"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-09-ioc-container-init-sequence/scan_process.png?format=webp&amp;amp;quality=85"
 alt="扫描顺序图"
 class="lazy-image"
 
 width="928"
 height="5419"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 &lt;figcaption style="text-align: center;"&gt;扫描顺序图&lt;/figcaption&gt;
&lt;/figure&gt;&lt;/p&gt;</description></item><item><title>Idea debug 堆栈窗口中的符号`&lt;init&gt;`</title><link>https://ongoingblog.org/2025/05/idea-debug-stack-init/</link><pubDate>Thu, 08 May 2025 15:16:40 +0800</pubDate><guid>https://ongoingblog.org/2025/05/idea-debug-stack-init/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-08-idea-debug-stack-init/debug_init.png"
 class="image-loading-container"
 
 data-pswp-width="761"
 data-pswp-height="557"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-08-idea-debug-stack-init/debug_init.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="761"
 height="557"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;在 debug 时发现 IDEA 中 debug 堆栈中有一个符号&lt;code&gt;&amp;lt;init&amp;gt;&lt;/code&gt;，我不知道这是代表的什么意思。
点进去看涉及的是类中的构造方法代码。&lt;/p&gt;
&lt;h3 id="二init代表的是什么"&gt;二、&lt;code&gt;&amp;lt;init&amp;gt;&lt;/code&gt;代表的是什么？&lt;/h3&gt;
&lt;p&gt;在 IDEA 的调试堆栈中，带有&lt;code&gt;&amp;lt;init&amp;gt;&lt;/code&gt;的记录表示对象的构造函数或者实例初始化块，表示对象初始化逻辑。&lt;/p&gt;
&lt;h3 id="三示例代码"&gt;三、示例代码&lt;/h3&gt;
&lt;p&gt;如下代码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DebugInitDemo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;初始化代码块&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 这里断点&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;DebugInitDemo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;构造函数&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 这里断点&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DebugInitDemo&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;debug 模式启动，查看调试堆栈。&lt;/p&gt;
&lt;p&gt;初始化代码块涉及的堆栈信息


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-05-08-idea-debug-stack-init/init_block.png"
 class="image-loading-container"
 
 data-pswp-width="810"
 data-pswp-height="493"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-05-08-idea-debug-stack-init/init_block.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="810"
 height="493"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;</description></item><item><title>Git修改已提交记录的邮件地址</title><link>https://ongoingblog.org/2025/04/modify-email-address-of-your-committed-record/</link><pubDate>Thu, 24 Apr 2025 19:54:28 +0800</pubDate><guid>https://ongoingblog.org/2025/04/modify-email-address-of-your-committed-record/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;仓库中提交代码时发现邮件地址写错了，但是已经提交了，需要修改错误的邮件地址。&lt;/p&gt;
&lt;h3 id="二步骤"&gt;二、步骤&lt;/h3&gt;
&lt;h4 id="安装-git-filter-repo"&gt;安装 git-filter-repo&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install git-filter-repo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="修改邮件地址"&gt;修改邮件地址&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git filter-repo --email-callback &lt;span class="s1"&gt;&amp;#39;return email.replace(b&amp;#34;旧邮件地址&amp;#34;, b&amp;#34;新邮件地址&amp;#34;)&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三注意"&gt;三、注意&lt;/h3&gt;
&lt;p&gt;原先的commit id会被覆盖掉，生成新的 commit id记录，可自行查看 git commit 记录的 hash id 和原来是不一样的了。&lt;/p&gt;</description></item><item><title>dependentBeanMap and dependenciesForBeanMap</title><link>https://ongoingblog.org/2025/04/dependentbeanmap-and-dependenciesforbeanmap/</link><pubDate>Wed, 23 Apr 2025 11:08:31 +0800</pubDate><guid>https://ongoingblog.org/2025/04/dependentbeanmap-and-dependenciesforbeanmap/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;在&lt;code&gt;org.springframework.beans.factory.support.DefaultSingletonBeanRegistry&lt;/code&gt;看到这两个变量&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;dependentBeanMap&lt;/code&gt;: 本bean是其他bean的外部依赖，本bean是底层，别的bean需要本bean才能活下去。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dependenciesForBeanMap&lt;/code&gt;: 外部依赖，本bean依赖于外部依赖。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="二结构"&gt;二、结构&lt;/h3&gt;
&lt;p&gt;依赖关系如下图所示&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-23-dependentbeanmap-and-dependenciesforbeanmap/dependent_bean_and_dependency_bean.png"
 class="image-loading-container"
 
 data-pswp-width="346"
 data-pswp-height="409"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-23-dependentbeanmap-and-dependenciesforbeanmap/dependent_bean_and_dependency_bean.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="346"
 height="409"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h4 id="dependentbeanmap反向依赖-"&gt;dependentBeanMap(反向依赖 &amp;lt;&amp;ndash;)&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;存放的是&lt;code&gt;dependent bean&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;结构&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dependentBeanMap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanA&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanB&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanC&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// beanB, beanC 依赖 beanA&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanB&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanD&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// beanD 依赖 beanB&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;当 bean 被销毁时，通过 dependentBeanMap 找到依赖它的所有 bean，触发这些 bean 的销毁。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="dependenciesforbeanmap正向依赖-"&gt;dependenciesForBeanMap(正向依赖 &amp;ndash;&amp;gt;)&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;存放的是&lt;code&gt;dependency bean&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;结构&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dependenciesForBeanMap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanB&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanA&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// beanB 依赖 beanA&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanC&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanA&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// beanC 依赖 beanA&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanD&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;beanB&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// beanD 依赖 beanB&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;初始化 bean 阶段，根据这个 map 确认依赖是否已经就绪，因为需要确保依赖先就绪，再初始化本 bean&lt;/p&gt;</description></item><item><title>什么是闭包</title><link>https://ongoingblog.org/2025/04/what-is-closure/</link><pubDate>Sun, 20 Apr 2025 10:22:37 +0800</pubDate><guid>https://ongoingblog.org/2025/04/what-is-closure/</guid><description>&lt;p&gt;闭包 (英文：Closure) 这个词听说过，但是之前似乎并不是很理解含义。&lt;/p&gt;
&lt;p&gt;之前写 lambda 表达式，内部的变量直接使用外部过来的，反正跟着官方教程来写，似乎这样使用很直观，不需要像定义函数那样还要传参，什么实参、形参，parameter, argument，反正可以对外部方法的变量直接去调用。&lt;/p&gt;
&lt;p&gt;最后看了下介绍原来这里使用的场景就可以说是闭包。封闭作用域。闭包是函数的&amp;quot;背包&amp;quot;，里面装着创建时的环境。即使当前方法执行完毕，只要方法中变量传递到了闭包，就可以正常执行。&lt;/p&gt;
&lt;p&gt;闭包是指一个函数可以访问其外部作用域的变量，即使外部函数已经执行完毕。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-20-what-is-closure/exp.png"
 class="image-loading-container"
 
 data-pswp-width="859"
 data-pswp-height="381"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-20-what-is-closure/exp.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="859"
 height="381"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;注意这里变量必须是 final/effectively final：确保闭包捕获的是&amp;quot;快照&amp;quot;而不是&amp;quot;引用&amp;quot;。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-20-what-is-closure/compare.png"
 class="image-loading-container"
 
 data-pswp-width="730"
 data-pswp-height="234"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-20-what-is-closure/compare.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="730"
 height="234"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>Class.isAssignableFrom()</title><link>https://ongoingblog.org/2025/04/class-isassignablefrom/</link><pubDate>Thu, 17 Apr 2025 16:06:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/class-isassignablefrom/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;在 spring 加载配置类，处理注解@Import&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;时，针对 candidate 做了比较，比较时就使用了&lt;code&gt;Class&lt;/code&gt;中的&lt;code&gt;isAssignableFrom()&lt;/code&gt;方法。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SourceClass&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;candidate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;importCandidates&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;candidate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImportSelector&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;)){}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;candidate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImportBeanDefinitionRegistrar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;)){}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="二使用"&gt;二、使用&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;native&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其中&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cls&lt;/code&gt;是待检查的类&lt;/li&gt;
&lt;li&gt;如果调用方法的类是 &lt;code&gt;cls&lt;/code&gt; 的父类、实现的接口，或者与 &lt;code&gt;cls&lt;/code&gt; 本身相同，返回 true.&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;关系&lt;/th&gt;
 &lt;th&gt;备注&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;类继承关系&lt;/td&gt;
 &lt;td&gt;父类.isAssignableFrom(子类) → true&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;接口实现关系&lt;/td&gt;
 &lt;td&gt;接口.isAssignableFrom(实现类) → true&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;自身比较&lt;/td&gt;
 &lt;td&gt;A.isAssignableFrom(A) → true&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;原始类型与包装类&lt;/td&gt;
 &lt;td&gt;原始类型（如 int）和其包装类（如 Integer）不兼容&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="三测试代码"&gt;三、测试代码&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AssignFromTest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 接口实现&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 自身比较 true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 继承&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 原始类型和包装类型&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 数组&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAssignableFrom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行结果&lt;/p&gt;</description></item><item><title>juc 系列</title><link>https://ongoingblog.org/2025/04/juc/</link><pubDate>Wed, 16 Apr 2025 10:08:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/juc/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;juc 并发工具包。&lt;/p&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-16-juc/jdk-share_exclusive.drawio.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-16-juc/jdk-share_exclusive.drawio.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;</description></item><item><title>Junit</title><link>https://ongoingblog.org/2025/04/junit/</link><pubDate>Tue, 15 Apr 2025 16:30:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/junit/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;Junit的使用。&lt;/p&gt;
&lt;h3 id="二一些注解"&gt;二、一些注解&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;注解&lt;/th&gt;
 &lt;th&gt;作用范围&lt;/th&gt;
 &lt;th&gt;典型用途&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;@BeforeEach&lt;/td&gt;
 &lt;td&gt;每个测试方法前执行&lt;/td&gt;
 &lt;td&gt;初始化测试环境（如创建对象）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;@AfterEach&lt;/td&gt;
 &lt;td&gt;每个测试方法后执行&lt;/td&gt;
 &lt;td&gt;清理资源或重置状态&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title>Java 关键字：transient</title><link>https://ongoingblog.org/2025/04/transient/</link><pubDate>Tue, 15 Apr 2025 15:10:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/transient/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;Java 序列化机制中的排除标记，用于控制对象的持久化范围，确保敏感数据或临时数据不被保存或传输。&lt;/p&gt;
&lt;h3 id="二作用"&gt;二、作用&lt;/h3&gt;
&lt;p&gt;序列化过程中，用 transient 标记的字段会被排除在序列化过程之外，反序列化时该字段的值会被设为默认值（对象为 null, int 类型字段为 0）。&lt;/p&gt;
&lt;h3 id="三使用场景"&gt;三、使用场景&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;敏感数据保护：密码、密钥不应被传输&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Serializable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;transient&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 序列化时忽略此字段&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;避免保存临时状态：例如缓存数据或中间计算结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DataProcessor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Serializable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rawData&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;transient&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cachedResult&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 无需保存临时结果&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="四字段添加了-transient-和不加的对比"&gt;四、字段添加了 transient 和不加的对比&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;不加 transient


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-15-transient/without_transient.png"
 class="image-loading-container"
 
 data-pswp-width="925"
 data-pswp-height="770"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-15-transient/without_transient.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="925"
 height="770"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;加 transient


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-15-transient/with_transient.png"
 class="image-loading-container"
 
 data-pswp-width="826"
 data-pswp-height="669"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-15-transient/with_transient.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="826"
 height="669"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;</description></item><item><title>回调 Callback</title><link>https://ongoingblog.org/2025/04/java-callback/</link><pubDate>Thu, 10 Apr 2025 16:25:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/java-callback/</guid><description>&lt;h3 id="一什么是回调"&gt;一、什么是回调？&lt;/h3&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-10-java-callback/callback.png"
 class="image-loading-container"
 
 data-pswp-width="300"
 data-pswp-height="308"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-10-java-callback/callback.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="300"
 height="308"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;如上图所示&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;client 端调用 server 端&lt;/li&gt;
&lt;li&gt;在特定条件满足时，又由 server 端反向调用 client 端&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;25.07.08 Tue&lt;/p&gt;
&lt;p&gt;补：前几天看电影迷失东京，斯嘉丽和她在美国的朋友打电话结束的时候说“call me back”，我想着这不也是回调嘛，你调用的模块，在某个条件来临时会来调用你。&lt;/p&gt;
&lt;h3 id="二回调使用的场景"&gt;二、回调使用的场景&lt;/h3&gt;
&lt;p&gt;观察者模式&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;观察者实现回调接口&lt;/li&gt;
&lt;li&gt;被观察者状态发生变更时触发回调，观察者们接收对应的状态变更消息&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="三好处"&gt;三、好处&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;调用方和被调用方分离，只通过接口进行交互&lt;/li&gt;
&lt;li&gt;被调用方可以定义逻辑顺序，不管具体实现，只需要在约定的时机触发回调&lt;/li&gt;
&lt;li&gt;至于接口方法逻辑如何被实现，由调用方自由进行控制&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="四代码例子"&gt;四、代码例子&lt;/h3&gt;
&lt;p&gt;接口定义&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * @description 回调接口
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Callback&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;callbackMethod&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;调用方实现接口&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * @description 调用方
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Callback&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;callbackMethod&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;client 执行回调方法：&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;传递对象、触发回调&lt;/p&gt;</description></item><item><title>LinkedHashMap使用</title><link>https://ongoingblog.org/2025/04/linkedhashmap/</link><pubDate>Wed, 09 Apr 2025 09:45:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/linkedhashmap/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;可以用LinkedHashMap去实现LRUCache，这里说一下它的用法。&lt;/p&gt;
&lt;h3 id="二原理"&gt;二、原理&lt;/h3&gt;
&lt;p&gt;使用双向链表来维护遍历顺序。&lt;/p&gt;
&lt;h3 id="三应用场景"&gt;三、应用场景&lt;/h3&gt;
&lt;p&gt;基于LRU算法的缓存。&lt;/p&gt;
&lt;h3 id="四实现"&gt;四、实现&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;java.util.LinkedHashMap&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;java.util.Map&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * @description 使用LinkedHashMap实现LRUCache
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * @date 2025-04-09
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LRUCache&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;extends&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LinkedHashMap&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 容量&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 初始化&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;LRUCache&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 注意：accessOrder必须设置为true,才会有LRU的特性。否则，只会维护插入顺序&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;75f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// loadFactor是float类型的&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;capacity&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 根据key获取value。存在返回，不存在返回-1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getOrDefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 向缓存中插入(key, value)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 是否移除旧结点逻辑(双向链表的头部结点)，触发条件。注意：此为实现固定大小的缓存的关键&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// it allows the map to reduce memory consumption(内存消耗) by deleting &lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// stale(不新鲜的) entries.&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;protected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;removeEldestEntry&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Entry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;eldest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;size&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;capacity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;测试程序&lt;/p&gt;</description></item><item><title>设计 LRU</title><link>https://ongoingblog.org/2025/04/design-lru-algo/</link><pubDate>Tue, 08 Apr 2025 19:00:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/design-lru-algo/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;含义：Least Recently Used, 最近最少使用。&lt;/li&gt;
&lt;li&gt;作用：缓存空间不足时，决定哪些数据被移除。&lt;/li&gt;
&lt;li&gt;场景
&lt;ul&gt;
&lt;li&gt;内存管理，页面置换算法&lt;/li&gt;
&lt;li&gt;一种缓存淘汰策略&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有一种叫作 LFU，使用频率进行淘汰，淘汰掉频次最低的元素。&lt;/p&gt;
&lt;h3 id="二原理"&gt;二、原理&lt;/h3&gt;
&lt;p&gt;局部性原理&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;时间局部性：被引用过一次的存储器位置在未来会被多次引用（通常在循环中）。&lt;/li&gt;
&lt;li&gt;空间局部性：如果一个存储器的位置被引用，那么将来他附近的位置也会被引用。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="三实现"&gt;三、实现&lt;/h3&gt;
&lt;p&gt;三个操作&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;查找 get
当某个元素被访问到，会把它移动到链表的表头&lt;/li&gt;
&lt;li&gt;插入 put
存在结点，更新
不存在，插入到表头。如果空间不足，还需要淘汰掉末尾的结点&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="单链表实现"&gt;单链表实现&lt;/h4&gt;
&lt;h4 id="双链表实现"&gt;双链表实现&lt;/h4&gt;
&lt;p&gt;双向链表 + 哈希表&lt;/p&gt;
&lt;p&gt;双向链表：最近使用的放在链表的前端，反之则是在链表的后端。&lt;/p&gt;
&lt;h4 id="linkedhashmap-实现"&gt;&lt;a href="https://ongoingblog.org/2025/04/linkedhashmap/"&gt;LinkedHashMap 实现&lt;/a&gt;&lt;/h4&gt;</description></item><item><title>Headless Mode</title><link>https://ongoingblog.org/2025/04/java-headless-mode/</link><pubDate>Sun, 06 Apr 2025 14:47:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/java-headless-mode/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;第一次看到&lt;code&gt;headless&lt;/code&gt;这个词，先去搜索了下含义


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-06-java-headless-mode/headless_meaning.png"
 class="image-loading-container"
 
 data-pswp-width="584"
 data-pswp-height="341"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-06-java-headless-mode/headless_meaning.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="584"
 height="341"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;p&gt;叫作无头的，也就是说 java headless mode 翻译为中文就是 java 无头模式。&lt;/p&gt;
&lt;p&gt;依旧不懂这个名词的意思，虽然翻译过来了。&lt;/p&gt;
&lt;p&gt;继续搜索，网上的结果这样显示：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Java 无头模式（Headless Mode）是 Java 提供的一种特殊运行模式，允许在没有物理显示设备、键盘或鼠标的环境（如服务器、后台服务、命令行环境）中执行依赖于图形界面的操作。它通过虚拟化图形环境，支持部分图形功能（如生成图片、PDF、图表等），而无需实际显示器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;联系到这个用途我就可以理解了，就是类似后台执行的程序一样，不需要前台的一个展示界面。&lt;/p&gt;
&lt;h3 id="二java-headless-mode"&gt;二、Java Headless Mode&lt;/h3&gt;
&lt;p&gt;通过虚拟化一个“看不见的图形环境”（无头的图形环境），绕过对物理显示设备的依赖，但仍允许程序使用图形库的核心功能（如绘图、字体处理、图像生成）。&lt;/p&gt;
&lt;p&gt;在服务器等无图形设备的环境中，依然能利用图形库完成关键任务（如生成报表、处理图片），是后台自动化处理的利器。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如何配置&lt;code&gt;headless mode&lt;/code&gt;?&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;java.awt.headless&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="三类似场景"&gt;三、类似场景&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://developer.chrome.google.cn/docs/chromium/headless?hl=zh-cn"target="_blank" rel="noopener noreferrer"&gt;Chrome 无头模式&lt;/a&gt;：谷歌浏览器的无界面模式，用于自动化测试。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;借助 Chrome 无头模式，您可以在无人值守的环境中运行浏览器，而无需任何可见的界面。从本质上讲，您无需 chrome 即可运行 Chrome。


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-06-java-headless-mode/chrome_headful_and_headless_mode.png"
 class="image-loading-container"
 
 data-pswp-width="549"
 data-pswp-height="252"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-06-java-headless-mode/chrome_headful_and_headless_mode.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="549"
 height="252"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="四参考"&gt;四、参考&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.oracle.com/technical-resources/articles/javase/headless.html"target="_blank" rel="noopener noreferrer"&gt;Using Headless Mode in the Java SE Platform&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;遇到的一个产品支持的特性中有下面这样一条&lt;/li&gt;
&lt;/ul&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-06-java-headless-mode/console_mode.png"
 class="image-loading-container"
 
 data-pswp-width="740"
 data-pswp-height="272"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-06-java-headless-mode/console_mode.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="740"
 height="272"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>搭建 SpringBoot 源码阅读环境</title><link>https://ongoingblog.org/2025/04/build-spring-boot-source-code-environment/</link><pubDate>Sun, 06 Apr 2025 08:22:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/build-spring-boot-source-code-environment/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一背景"&gt;一、背景&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二步骤"&gt;二、步骤&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三框架前身-interface21-源码环境搭建"&gt;三、框架前身 interface21 源码环境搭建&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;springboot 的特点：&lt;/p&gt;</description></item><item><title>SPI</title><link>https://ongoingblog.org/2025/04/service-provider-interface/</link><pubDate>Sat, 05 Apr 2025 19:30:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/service-provider-interface/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;SPI(service provider interface): 服务供应接口。&lt;/p&gt;
&lt;p&gt;服务发现机制。为某个接口寻找服务实现的机制。类似于依赖注入。
适合插件化架构。&lt;/p&gt;
&lt;h3 id="二为什么要有-spi"&gt;二、为什么要有 SPI?&lt;/h3&gt;
&lt;p&gt;根据子类发现父类或者接口很容易，原生方法支持&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;java.lang.Class#getSuperclass&lt;/code&gt; 返回父类&lt;/li&gt;
&lt;li&gt;&lt;code&gt;java.lang.Class#getInterfaces()&lt;/code&gt; 返回实现的接口列表&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但是根据接口发现实现类很难。总不能去遍历类路径下面的所有 jar 包，找到实现了给定接口的所有实现类，这绝对耗时极长。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;java.util.ServiceLoader&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这个类就是专门用作服务发现的类。它约定服务提供商要把自己的实现类写在目录&lt;code&gt;META-INF/services&lt;/code&gt;下，这样它就会到这里去找对应的服务，也不需要全局去查找了。&lt;/p&gt;
&lt;h3 id="三书写格式"&gt;三、书写格式&lt;/h3&gt;
&lt;p&gt;是一个 map 的形式，key 是我们的文件名，value 是文件内容，每个实现类一行&lt;/p&gt;
&lt;p&gt;每个接口一个文件。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-05-spi/services.png"
 class="image-loading-container"
 
 data-pswp-width="848"
 data-pswp-height="223"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-05-spi/services.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="848"
 height="223"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="四案例"&gt;四、案例&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;jdk8&lt;/code&gt;中&lt;code&gt;java.sql.DriverManager#loadInitialDrivers&lt;/code&gt;使用了这种方式来加载驱动：&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-05-spi/loadInitialDrivers.png"
 class="image-loading-container"
 
 data-pswp-width="892"
 data-pswp-height="729"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-05-spi/loadInitialDrivers.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="892"
 height="729"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>Debug 的经验</title><link>https://ongoingblog.org/2025/04/debug/</link><pubDate>Sat, 05 Apr 2025 18:34:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/debug/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;这里存放一些优化调试行为的点。&lt;/p&gt;
&lt;h3 id="二场景"&gt;二、场景&lt;/h3&gt;
&lt;h4 id="一"&gt;（一）&lt;/h4&gt;
&lt;p&gt;单元方法测试为了验证某个 assertNull(a), 可以在执行中直接 F2 修改原变量为 null，验证是否跑到。如果是整个服务范围的测试，建议从业务逻辑上考虑造出这样的数据。&lt;/p&gt;
&lt;h4 id="二条件断点语句"&gt;（二）条件断点语句&lt;/h4&gt;
&lt;p&gt;IDEA debug 查看当前 BeanPostProcessor 类型的变量 pp 是否为 InfrastructureAdvisorAutoProxyCreator，断点语句应该怎么写？&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-05-debug/problem.png"
 class="image-loading-container"
 
 data-pswp-width="938"
 data-pswp-height="483"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-05-debug/problem.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="938"
 height="483"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;条件断点表达式这样写：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pp.getClass() == org.springframework.aop.framework.autoproxy.InfrastructureAdvisorAutoProxyCreator.class&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="三给每个测试方法都起自定义名称"&gt;（三）给每个测试方法都起自定义名称&lt;/h4&gt;
&lt;p&gt;核心价值在于让测试报告自解释，使团队能快速理解测试目的，尤其在复杂业务场景中大幅提升维护效率。推荐为所有测试方法添加此注解以提升代码可读性。&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-05-debug/debug_test_display_name.png"
 class="image-loading-container"
 
 data-pswp-width="370"
 data-pswp-height="95"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-05-debug/debug_test_display_name.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="370"
 height="95"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h4 id="四强制跳过所有断点"&gt;（四）强制跳过所有断点&lt;/h4&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-05-debug/force_run_to_cursor.png"
 class="image-loading-container"
 
 data-pswp-width="858"
 data-pswp-height="434"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-05-debug/force_run_to_cursor.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="858"
 height="434"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h4 id="五异步调试"&gt;（五）异步调试&lt;/h4&gt;
&lt;p&gt;尽量延长 main 线程的时长，在 main 方法体最后写上一句 sleep 语句，因为在测试时如果 main 线程 (非守护线程) 退出了，jvm 也会退出，这样的话就可能观察不到异步线程里的行为了。&lt;/p&gt;</description></item><item><title>IDEA不识别moudle</title><link>https://ongoingblog.org/2025/04/idea-not-identify-module/</link><pubDate>Fri, 04 Apr 2025 20:47:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/idea-not-identify-module/</guid><description>&lt;h3 id="一idea中突然不识别我新建的module了"&gt;一、IDEA中突然不识别我新建的module了&lt;/h3&gt;
&lt;p&gt;显示如下图&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-04-idea-not-identify-module/error_module.png"
 class="image-loading-container"
 
 data-pswp-width="400"
 data-pswp-height="402"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-04-idea-not-identify-module/error_module.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="400"
 height="402"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id="二解决方案"&gt;二、解决方案&lt;/h3&gt;
&lt;p&gt;在网上搜索了下其他人遇到的，但是对我并不适用。&lt;/p&gt;
&lt;p&gt;索性直接新建了一个名为&lt;code&gt;my-test2&lt;/code&gt;的module，这次新建直接就是好的:


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-04-idea-not-identify-module/good_module.png"
 class="image-loading-container"
 
 data-pswp-width="392"
 data-pswp-height="252"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-04-idea-not-identify-module/good_module.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="392"
 height="252"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;
&lt;p&gt;为了避免下一次的问题出现，我想把这个样例先给commit下，发现有一个文件的变更，变更涉及到一句新增的代码:&lt;/p&gt;
&lt;p&gt;涉及文件settings.gradle&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ include &amp;#39;my-test2&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这个文件新增了一句这个。&lt;/p&gt;
&lt;p&gt;我突然想起之前切换到源码的其他分支时，为了顺利切换，把新建my-test模块时涉及到的这个类似变更给扔到暂存里去了。&lt;/p&gt;
&lt;p&gt;我把my-test的变更恢复回来，module就能识别到了&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-04-idea-not-identify-module/recovered_module.png"
 class="image-loading-container"
 
 data-pswp-width="404"
 data-pswp-height="272"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-04-idea-not-identify-module/recovered_module.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="404"
 height="272"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;</description></item><item><title>JavaBean</title><link>https://ongoingblog.org/2025/04/javabean/</link><pubDate>Fri, 04 Apr 2025 19:00:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/javabean/</guid><description>&lt;h3 id="一什么是-javabean"&gt;一、什么是 JavaBean&lt;/h3&gt;
&lt;p&gt;遵守以下这些约定俗成规范的类就是 JavaBean:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;是一个 public 类&lt;/li&gt;
&lt;li&gt;有一个 public 的无参构造函数&lt;/li&gt;
&lt;li&gt;所有的属性都是私有的，提供 public 的 getter/setter 方法&lt;/li&gt;
&lt;li&gt;如果希望能被持久化，需要实现&lt;a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html"target="_blank" rel="noopener noreferrer"&gt;Serializable 接口&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="二例子"&gt;二、例子&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Entity&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Employee&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Serializable&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Id&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Employee&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Employee&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getId&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setId&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getSalary&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setSalary&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="三pojoplain-old-java-object"&gt;三、POJO(Plain Old Java Object)&lt;/h3&gt;
&lt;p&gt;和 JavaBean 都是对象模型。&lt;/p&gt;</description></item><item><title>CAS(compare and swap)</title><link>https://ongoingblog.org/2025/04/compare-and-set/</link><pubDate>Thu, 03 Apr 2025 19:54:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/compare-and-set/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一背景"&gt;一、背景&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二和传统锁的对比"&gt;二、和传统锁的对比&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三实际的使用"&gt;三、实际的使用&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#四存在的问题"&gt;四、存在的问题&lt;/a&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#一aba-问题"&gt;（一）ABA 问题&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二开销问题"&gt;（二）开销问题&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三只能保证一个共享变量的原子问题"&gt;（三）只能保证一个共享变量的原子问题&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;li&gt;&lt;a href="#五无限循环是谁的职责"&gt;五、无限循环是谁的职责&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h2 id="一背景"&gt;一、背景&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;为什么要有 CAS，它解决了什么问题？&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>搭建 Spring 源码阅读环境</title><link>https://ongoingblog.org/2025/04/build-spring-source-code-environment/</link><pubDate>Wed, 02 Apr 2025 12:10:00 +0800</pubDate><guid>https://ongoingblog.org/2025/04/build-spring-source-code-environment/</guid><description>&lt;h3 id="一背景"&gt;一、背景&lt;/h3&gt;
&lt;p&gt;搭建 Spring 源码阅读环境。&lt;/p&gt;
&lt;h3 id="二步骤"&gt;二、步骤&lt;/h3&gt;
&lt;h4 id="下载源码"&gt;下载源码&lt;/h4&gt;
&lt;p&gt;打开&lt;a href="https://github.com/spring-projects/spring-framework"target="_blank" rel="noopener noreferrer"&gt;spring-framework 仓库地址&lt;/a&gt;，将项目源码 clone 到本地。&lt;/p&gt;
&lt;h4 id="本地编译源码"&gt;本地编译源码&lt;/h4&gt;
&lt;p&gt;在用 IDEA 打开项目，这里我切换的分支是&lt;code&gt;5.3.x&lt;/code&gt;，项目就会自动拉取依赖进行编译。&lt;/p&gt;
&lt;p&gt;但问题是下载依赖的速度太慢了。最好用【三、技巧】中的方法加快一下下载速度，编译也马上就完成了。&lt;/p&gt;
&lt;h4 id="验证编译是否有问题"&gt;验证编译是否有问题&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;新建一个自定义的模块&lt;/p&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-02-build-spring-source-code-environment/create_a_new_module.png"
 class="image-loading-container"
 
 data-pswp-width="434"
 data-pswp-height="482"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-02-build-spring-source-code-environment/create_a_new_module.png?format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="434"
 height="482"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;建好后模块的目录树如下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;➜ my-test git:&lt;span class="o"&gt;(&lt;/span&gt;5.3.x&lt;span class="o"&gt;)&lt;/span&gt; ✗ tree . -L &lt;span class="m"&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;├── build &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;│   ├── classes &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;│   ├── generated &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;│   ├── resources &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;│   └── tmp &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;├── build.gradle &lt;span class="c1"&gt;# 需要关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;└── src
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ├── main &lt;span class="c1"&gt;# 需要关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ├── &lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; └── testFixtures &lt;span class="c1"&gt;# 无需关注&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="三技巧"&gt;三、技巧&lt;/h3&gt;
&lt;h4 id="idea-设置代理加快项目下载依赖的速度"&gt;IDEA 设置代理，加快项目下载依赖的速度&lt;/h4&gt;
&lt;p&gt;设置路径：&lt;code&gt;Settings | Appearance &amp;amp; Behavior | System Settings | HTTP Proxy&lt;/code&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2025-04-02-build-spring-source-code-environment/idea_set_http_proxy.png"
 class="image-loading-container"
 
 data-pswp-width="1964"
 data-pswp-height="1444"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2025-04-02-build-spring-source-code-environment/idea_set_http_proxy.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1964"
 height="1444"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;/p&gt;</description></item><item><title>Mybatis缓存机制</title><link>https://ongoingblog.org/2024/09/mybatis-cache/</link><pubDate>Tue, 03 Sep 2024 12:10:00 +0800</pubDate><guid>https://ongoingblog.org/2024/09/mybatis-cache/</guid><description>&lt;p&gt;提高查询效率和减轻数据库压力。&lt;/p&gt;
&lt;h3 id="分类"&gt;分类&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;一级缓存&lt;/li&gt;
&lt;li&gt;二级缓存&lt;/li&gt;
&lt;li&gt;第三方缓存&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="一级缓存"&gt;一级缓存&lt;/h3&gt;
&lt;p&gt;本地缓存。SqlSession级别。&lt;/p&gt;
&lt;p&gt;如何验证，在IDEA中查看控制台是否执行了sql查询语句，如果是直接返回结果，就是从缓存中拿的，不是去查的数据库。&lt;/p&gt;
&lt;h3 id="二级缓存"&gt;二级缓存&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;作用域比一级缓存大。&lt;/li&gt;
&lt;li&gt;多个sqlsession可以共用一级缓存。&lt;/li&gt;
&lt;li&gt;默认情况下，二级缓存关闭，需要手工开启。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;开启二级缓存后：二级缓存 - 一级缓存 - 数据库&lt;/p&gt;
&lt;h3 id="失效情形"&gt;失效情形&lt;/h3&gt;
&lt;p&gt;两次查询之间执行增删改操作，会同时清空一级缓存和二级缓存。&lt;/p&gt;</description></item><item><title>程序上下文</title><link>https://ongoingblog.org/2024/03/context/</link><pubDate>Sat, 16 Mar 2024 11:34:00 +0800</pubDate><guid>https://ongoingblog.org/2024/03/context/</guid><description>&lt;p&gt;前言: 程序上下文。&lt;/p&gt;
&lt;p&gt;可以理解为环境。
一段程序依赖的变量的集合，如果没有这些外部变量，这些单独的方法也做不了什么。
一个功能在应用中可能包含了多个方法集合，从请求进入，到逻辑执行，到最后的输出，会加载变量，这些变量又会进入到各种方法，方法可能会对变量产生影响，这一整个过程中
包含的各类变量大杂烩就是上下文。&lt;/p&gt;
&lt;p&gt;上下文虽然叫上下文，程序一般只有上文而已。&lt;/p&gt;
&lt;p&gt;&amp;ldquo;读者要想解读一段由这种符号组成的信息，必须事先知道这段信息的语境 -
它的上下文关系，前因后果&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;线程的上下文切换&lt;/strong&gt;
当两个线程属于同一个进程时，因为虚拟内存是共享的，所以在切换时，虚拟内存资源就保持不动，只需要切换线程的私有数据、寄存器等不共享的数据。&lt;/p&gt;</description></item><item><title>Threadlocal</title><link>https://ongoingblog.org/2023/11/threadlocal/</link><pubDate>Wed, 08 Nov 2023 22:48:00 +0800</pubDate><guid>https://ongoingblog.org/2023/11/threadlocal/</guid><description>&lt;p&gt;前言：Threadlocal 线程本地变量的例子。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ThreadlocalUtils.java&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;java.util.HashMap&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;java.util.Map&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ThreadlocalUtils&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ThreadLocal&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadlocal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ThreadLocal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;protected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;initialValue&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;threadlocal 初始化，值为空&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setData&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadlocal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HashMap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadlocal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;getData&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadlocal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadlocal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;ThreadlocalUtilsTest.java&lt;/code&gt;&lt;/p&gt;</description></item><item><title>线程池</title><link>https://ongoingblog.org/2023/06/threadpool/</link><pubDate>Sun, 18 Jun 2023 10:13:00 +0800</pubDate><guid>https://ongoingblog.org/2023/06/threadpool/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#零执行流程"&gt;零、执行流程&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#一前言"&gt;一、前言&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#二涉及方法"&gt;二、涉及方法&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#三守护线程-daemon"&gt;三、守护线程 (Daemon)&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#四注意"&gt;四、注意&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#五动态线程池"&gt;五、动态线程池&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h3 id="零执行流程"&gt;零、执行流程&lt;/h3&gt;
&lt;h4 id="1execute"&gt;1、execute&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2023-06-18-threadpool/jdk-ThreadPool_exec.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2023-06-18-threadpool/jdk-ThreadPool_exec.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h4 id="2addworker"&gt;2、addWorker&lt;/h4&gt;























 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 









&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2023-06-18-threadpool/jdk-addWorker.svg"
 class="image-loading-container"
 
 data-pswp-width="800"
 data-pswp-height="600"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2023-06-18-threadpool/jdk-addWorker.svg"
 alt=""
 class="lazy-image"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
 
&lt;/figure&gt;
&lt;h3 id="一前言"&gt;一、前言&lt;/h3&gt;
&lt;p&gt;线程池等池化技术在我们日常开发中扮演着重要的角色。可以管理线程的创建和销毁，不需要开发者关心内部是如何运作的。&lt;/p&gt;</description></item><item><title>synchronized</title><link>https://ongoingblog.org/2022/12/synchronized/</link><pubDate>Sat, 24 Dec 2022 20:38:00 +0800</pubDate><guid>https://ongoingblog.org/2022/12/synchronized/</guid><description>&lt;p&gt;前言：此关键字是 java 的内置锁关键字，不需要开发者手动去加锁和解锁，加锁和解锁都是有 jvm 来负责，使用起来较为方便。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;锁需要共享的成员变量，例如常用的 map.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;是否是可重入的？
是的。&lt;/p&gt;
&lt;p&gt;通用流程&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;序号&lt;/th&gt;
 &lt;th&gt;内容&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;1&lt;/td&gt;
 &lt;td&gt;看到了锁，根据锁关联的对象，判断锁的级别 (实例级别、类级别)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;书写的几种类型&lt;/p&gt;
&lt;p&gt;修饰方法&lt;/p&gt;
&lt;p&gt;修饰代码块&lt;/p&gt;
&lt;p&gt;注意，synchronized 方法和 synchronized 代码块无论是执行 return 还是抛出异常，都一定能释放锁。因为不需要开发者显示去加锁、解锁，这些逻辑都被 jdk 给封装好了，开发者直接标识同步区域就好了。&lt;/p&gt;
&lt;p&gt;如果锁代码块
则使用 monitorenter 和 monitorexit 来进入临界区和出临界区&lt;/p&gt;
&lt;p&gt;如果修饰方法
在方法的 ACC_FLAG 中会存在 ACC_SYNCHRONIZED 标识。&lt;/p&gt;
&lt;p&gt;一个问题，下面这个代码是否有问题&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;synchronized&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;看起来也是锁的类成员变量。
但其实是有问题的，因为 i 每次都会变，所以这里锁的对象每次都是不同的，所以加锁也失去了意义。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;i++&lt;/code&gt; 实际是创建了一个新的 Integer 对象，&lt;code&gt;i = Integer.valueOf(i.intValue() + 1)&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;解决方案：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;使用原子变量 AtomicInteger 进行计数，这样就不用加锁。&lt;/li&gt;
&lt;li&gt;使用专门的对象锁，另起一个锁对象。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;永远不要锁可能改变引用的对象
锁对象应该是 final 的、不可变的&lt;/p&gt;</description></item><item><title>Countdownlatch</title><link>https://ongoingblog.org/2022/12/countdownlatch/</link><pubDate>Thu, 22 Dec 2022 12:34:00 +0800</pubDate><guid>https://ongoingblog.org/2022/12/countdownlatch/</guid><description>&lt;p&gt;前言：一个使用场景，例如分发 10 个线程，需要等到这 10 个线程全部都执行完毕后，再进行下一步的处理。&lt;/p&gt;
&lt;p&gt;看到过一个例子：举行跑步比赛，发令枪响后，几位选手开始跑步，当最后一位选手跑完全程，然后开始公布选手成绩、以及颁奖仪式。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;模拟多个线程同时执行的场景&lt;/li&gt;
&lt;li&gt;模拟依赖场景，例如一个数据的计算需要很多数据来源，需要这些数据来源全部加载完毕后才开始进行计算。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;主要方法&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;int getCount&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;await()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LatchTest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;LatchTest&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CountDownLatch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CountDownLatch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;)).&lt;/span&gt;&lt;span class="na"&gt;start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;3 秒后开始....&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SleepUtil&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;3000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;countDown&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;deal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadNum&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CountDownLatch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;await&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;开始运行...&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;catch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterruptedException&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;throw&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RuntimeException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;test2&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CountDownLatch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CountDownLatch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;10&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deal2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;)).&lt;/span&gt;&lt;span class="na"&gt;start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;等待加载中...&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;await&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;开始进入主界面&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;catch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterruptedException&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;throw&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RuntimeException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;deal2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;threadNum&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CountDownLatch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;threadNum&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;开始运行&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SleepUtil&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LOGGER&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;threadNum&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;运行结束&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;catch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;finally&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;latch&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;countDown&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 放在 finally 语句块中，无论程序正常执行还是出现异常，都会执行&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>异步的使用</title><link>https://ongoingblog.org/2022/12/async-usage/</link><pubDate>Sat, 10 Dec 2022 10:30:00 +0800</pubDate><guid>https://ongoingblog.org/2022/12/async-usage/</guid><description>&lt;p&gt;前言: 在代码逻辑中，你为什么要起异步？起异步的目的是什么？
让这个逻辑的响应顺序返回给前台？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;还是为了加快程序的处理速度，让程序并行执行，压榨机器，利用好机器的每一份性能。&lt;/li&gt;
&lt;li&gt;小心在业务程序中打日志。这是有可能影响性能的，如果要用的话，可以使用异步日志。当然这要考虑日志丢失的情况。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本类中调用异步方法
在异步方法中断点，发现会阻断主程序。&lt;/p&gt;
&lt;p&gt;使用IDEA软件中的断点时，将断点的类型置为Thread类型。&lt;/p&gt;</description></item><item><title>事务和异步</title><link>https://ongoingblog.org/2022/12/transaction-and-async/</link><pubDate>Tue, 06 Dec 2022 22:47:00 +0800</pubDate><guid>https://ongoingblog.org/2022/12/transaction-and-async/</guid><description>&lt;p&gt;前言: 昨天在生产上遇到了一个问题。
无缘无故遇到了空指针。但是大部分都是正常的，少部分根据那个key在表中查不到数据。&lt;/p&gt;
&lt;p&gt;最后发现是因为外层事务未完成，里面起的异步线程就开始跑了，但是根据key查不到外面方法里要插的数据，因为这个时候外层方法还没有提交.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Transactional&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;exec&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 事务开始
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// insert 操作&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 调用异步方法&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 事务结束
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Async&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Transactional&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;method&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 异步操作开始
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;selectByKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; * 其他操作
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; */&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;解决方法：&lt;/p&gt;</description></item><item><title>数据库表定义时表中冗余代码字段的重要性</title><link>https://ongoingblog.org/2022/08/the-importance-of-speccode/</link><pubDate>Thu, 11 Aug 2022 12:45:00 +0800</pubDate><guid>https://ongoingblog.org/2022/08/the-importance-of-speccode/</guid><description>&lt;p&gt;前言：今天讲的是冗余代码的作用。&lt;/p&gt;
&lt;p&gt;冗余代码不仅在数据库表中有重要作用，也在请求接口中有重要作用！&lt;/p&gt;
&lt;p&gt;数据库中在设计表的时候就提前划分一个字段冗余码，我们后期想要添加什么信息，但是又不好动原表时，这个时候冗余码的作用就非常重要了，直接用上冗余码就好。&lt;/p&gt;
&lt;p&gt;在续传接口也可以使用。&lt;/p&gt;</description></item><item><title>表查询中的续传</title><link>https://ongoingblog.org/2022/08/resume-from-break-point/</link><pubDate>Thu, 11 Aug 2022 12:33:00 +0800</pubDate><guid>https://ongoingblog.org/2022/08/resume-from-break-point/</guid><description>&lt;p&gt;前言：关于表查询续传的注意事项。&lt;/p&gt;
&lt;p&gt;todo 建一张测试表，里面插数据&lt;/p&gt;
&lt;p&gt;InputX1.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;InputX1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;partitionNo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;InputY1.java&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;InputY1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;boolean&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;continuationCode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 续传标志&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;partitionNo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 续传标志 -1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 续传标志 -2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;specCode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 冗余代码&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;注意：续传标志必须要为表的唯一键。&lt;/p&gt;
&lt;p&gt;关于表的查询，有分页查询，也有续传查询，这里所说的是续传查询。&lt;/p&gt;
&lt;p&gt;例如我们的&lt;code&gt;Test_T&lt;/code&gt;中记录数为 11，但是我们每次传输的数量为 10，我们作为请求记录的一方，如果第一次请求得到的记录数为 10，这个时候肯定想要知道表中是不是还有其他数据，这个时候续传的那些标志就起到的作用。&lt;/p&gt;
&lt;p&gt;模拟请求第一次查询，因为不知道数据库表中的情况，Y1 中的那些字段全部置为空：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;continuationCode&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;partitionNo&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;specCode&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;把这个请求发到数据库中，表中有 21 条数据，查回来 10 条，我们这个时候接收到的 Y1:&lt;/p&gt;</description></item><item><title>程序什么时候应该重试？</title><link>https://ongoingblog.org/2022/06/when-to-retry/</link><pubDate>Thu, 09 Jun 2022 20:47:00 +0800</pubDate><guid>https://ongoingblog.org/2022/06/when-to-retry/</guid><description>&lt;p&gt;前言：两个服务交互的过程中，何时候需要去重试？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;因为网络的原因。例如网络的抖动导致响应超时。&lt;/li&gt;
&lt;li&gt;因为对方资源被其他使用方锁定，我方暂时不能使用，这个也会导致响应超时。这个时候需要等上一段时间后进行重试。&lt;/li&gt;
&lt;li&gt;重试还是失败了，这个时候怎么办？毕竟不能无限重试，总会有次数限制
&lt;ol&gt;
&lt;li&gt;是否需要状态转为人工，人为来处理。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>Java 第四部分 多态</title><link>https://ongoingblog.org/2020/10/java-review-part-4-polymorphism/</link><pubDate>Tue, 13 Oct 2020 19:48:34 +0800</pubDate><guid>https://ongoingblog.org/2020/10/java-review-part-4-polymorphism/</guid><description>&lt;p&gt;Java 基础知识第四部分。&lt;/p&gt;




&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#面向对象特性---多态"&gt;面向对象特性 - 多态&lt;/a&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#对象的向上转型"&gt;对象的向上转型&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#对象的向下转型"&gt;对象的向下转型&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#instanceof-关键字"&gt;instanceof 关键字&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#一个案例"&gt;一个案例&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#final-关键字"&gt;final 关键字&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#四种权限修饰符"&gt;四种权限修饰符&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#内部类"&gt;内部类&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;h2 id="面向对象特性---多态"&gt;面向对象特性 - 多态&lt;/h2&gt;


















 
 






 
 
 
 
 
 
 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 







 
 
 
 
 
 
 
 
 



&lt;figure class="pswp-gallery" style="display: inline-block; margin: 0;"&gt;
 &lt;a href="https://image.ongoingblog.org/posts/2020-10-13-java-review-part-4-polymorphism/java_31.png"
 class="image-loading-container"
 
 data-pswp-width="1244"
 data-pswp-height="695"
 
 target="_blank"&gt;
 &lt;img src="#ZgotmplZ"
 data-src="https://image.ongoingblog.org/posts/2020-10-13-java-review-part-4-polymorphism/java_31.png?width=1200&amp;amp;format=webp&amp;amp;quality=85"
 alt=""
 
 class="lazy-image"
 
 width="1244"
 height="695"
 
 style="max-width: 100%; height: auto;" /&gt;
 &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;多态针对的是对象。&lt;/p&gt;</description></item><item><title>Java 第三部分 继承</title><link>https://ongoingblog.org/2020/10/java-review-part-3-object-oriented-inheritance/</link><pubDate>Mon, 12 Oct 2020 19:42:44 +0800</pubDate><guid>https://ongoingblog.org/2020/10/java-review-part-3-object-oriented-inheritance/</guid><description>&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#面向对象特征---继承性"&gt;面向对象特征 - 继承性&lt;/a&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#抽象"&gt;抽象&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#接口"&gt;接口&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
&lt;p&gt;Java 基础知识第三部分。&lt;/p&gt;</description></item><item><title>Java 第二部分 封装</title><link>https://ongoingblog.org/2020/10/java-review-2-object-oriented-encapsulation/</link><pubDate>Sat, 10 Oct 2020 20:25:28 +0800</pubDate><guid>https://ongoingblog.org/2020/10/java-review-2-object-oriented-encapsulation/</guid><description>&lt;p&gt;



&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#面向对象"&gt;面向对象&lt;/a&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#类的定义"&gt;类的定义&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;li&gt;&lt;a href="#面向对象---封装性"&gt;面向对象 - 封装性&lt;/a&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#api-文档的查看"&gt;API 文档的查看&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
Java 基础知识第二部分。&lt;/p&gt;</description></item><item><title>Java 第一部分 基础</title><link>https://ongoingblog.org/2020/10/java-review-part-1-basic/</link><pubDate>Sat, 10 Oct 2020 19:32:48 +0800</pubDate><guid>https://ongoingblog.org/2020/10/java-review-part-1-basic/</guid><description>&lt;p&gt;



&lt;div class="toc-container"&gt;
 &lt;h2 class="toc-title"&gt;文章目录&lt;/h2&gt;
 &lt;div class="toc-content"&gt;
 &lt;nav id="TableOfContents"&gt;
 &lt;ul&gt;
 &lt;li&gt;
 &lt;ul&gt;
 &lt;li&gt;&lt;a href="#基础"&gt;基础&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="#java-内存划分-jmm"&gt;Java 内存划分 (JMM)&lt;/a&gt;&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/li&gt;
 &lt;/ul&gt;
&lt;/nav&gt;
 &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
 .toc-container {
 border-left: 3px solid #4a86e8;
 padding: 1.2rem 1.8rem;
 margin: 2.5rem 0;
 background: #f8fbfe;
 border-radius: 0 8px 8px 0;
 box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
 }

 .toc-title {
 font-size: 1.4rem;
 margin-top: 0;
 margin-bottom: 1rem;
 color: #2c5282;
 padding-bottom: 0.5rem;
 border-bottom: 1px solid #e2e8f0;
 }

 .toc-content ul {
 list-style: none;
 padding-left: 1.2rem;
 margin: 0;
 }

 .toc-content li {
 margin: 0.7rem 0;
 line-height: 1.1;
 position: relative;
 }

 .toc-content a {
 color: #3182ce;
 text-decoration: none;
 transition: all 0.3s ease;
 display: block;
 padding: 0.3rem 0.5rem;
 border-radius: 4px;
 }

 .toc-content a:hover {
 color: #020202;
 background: #ebf4ff;
 padding-left: 0.8rem;
 }

 .toc-warning {
 padding: 1.2rem;
 background: #fffaf0;
 border: 1px solid #feebc8;
 border-radius: 6px;
 color: #dd6b20;
 margin: 2rem 0;
 }

 .toc-warning p {
 margin: 0.5rem 0;
 }

 .toc-highlight {
 animation: highlight-fade 2s ease;
 background-color: rgba(255, 230, 0, 0.3);
 }

 @keyframes highlight-fade {
 0% { background-color: rgba(255, 230, 0, 0.8); }
 100% { background-color: transparent; }
 }

 
 .toc-debug {
 font-size: 0.9rem;
 color: #4a5568;
 }
 .toc-debug h4 {
 margin-top: 0;
 color: #2b6cb0;
 }
&lt;/style&gt;
学习 java 时还是大二的时候，当时很多现在新的特性都没有学习，现在重新复习一下 Java 基础部分。&lt;/p&gt;</description></item></channel></rss>