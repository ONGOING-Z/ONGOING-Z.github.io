<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>SQL 语言的基本使用 | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>SQL 语言的基本使用</span></h1><h2 class=date>2020/04/19</h2></div><main><p>一月份的时候有一个考察，但是当时连一个很简单的语句都不会写了，之后就在<a href=https://sqlbolt.com target=_blank rel="noopener noreferrer">SQLBolt</a>上进行了一个回顾，这里进行记录，以后方便随时回来查看。</p><h3 id=1-select>1. SELECT</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span>;
</span></span></code></pre></div><h3 id=2-queries-with-constraints>2. Queries with constraints</h3><ul><li>WHERE clause</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>,...
</span></span><span style=display:flex><span>FORM <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition
</span></span></code></pre></div><p>Operator | SQL Example
=-: | :-:
BETWEEN &mldr; AND &mldr; | clo_name <strong>BETWEEN</strong> 0.5 <strong>AND</strong> 1.5
NOT BETWEEN &mldr; AND &mldr; | clo_name NOT <strong>BETWEEN</strong> 2000 <strong>AND</strong> 2010
IN (&mldr;) | clo_name <strong>IN</strong> (1, 3, 5)
NOT IN (&mldr;) | col_name <strong>NOT IN</strong> (1, 3, 5)
表 1</p><p>Operator | Condition | Example
=-: | :-: | :-:
LIKE | Case insensitive exact string comparison | col_name <strong>LIKE</strong> &lsquo;abc&rsquo;
NOT LIKE | Case insensitive exact string inequality comparison | col_name <strong>NOT LIKE</strong> &lsquo;abc&rsquo;
% | Match(only with LIKE or NOT LIKE | col_name <strong>LIKE</strong> &lsquo;%hello%&rsquo;
_ | Used to match a single character(only with LIKE or NOT LIKE) | col_name <strong>LIKE</strong> &ldquo;AN_&rdquo;
IN (&mldr;) | String exists in a list | col_name <strong>IN</strong> (&ldquo;A&rdquo;, &ldquo;B&rdquo;)
NOT IN (&mldr;) | String does not exit in a list | col_name <strong>NOT IN</strong> (&ldquo;C&rdquo;, &ldquo;E&rdquo;)
表 2</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>,...
</span></span><span style=display:flex><span>FORM <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>AND</span><span style=color:#f92672>/</span><span style=color:#66d9ef>OR</span> another_condition
</span></span></code></pre></div><h3 id=3-filtering-and-sorting-query-results>3. Filtering and sorting Query results</h3><ul><li>Unique results</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#66d9ef>column</span>, another_column, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition(s)
</span></span></code></pre></div><ul><li>Ordering results</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> ordered results
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>, another_column, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition(s)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span> <span style=color:#66d9ef>ASC</span><span style=color:#f92672>/</span><span style=color:#66d9ef>DESC</span>;
</span></span></code></pre></div><ul><li>Limiting results to a subset</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> limited <span style=color:#66d9ef>rows</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>, another_column, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition(s)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span> <span style=color:#66d9ef>ASC</span><span style=color:#f92672>/</span><span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> num_limit <span style=color:#66d9ef>OFFSET</span> num_offset <span style=color:#f92672>%</span> offset偏移量
</span></span></code></pre></div><p>eg. List the last four Pixar movies released (ordered from most recent to least)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> movies
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>year</span> <span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>4</span>;
</span></span></code></pre></div><img src=sql_eg_1.png alt><p>eg. List the <strong>next</strong> five Pixar movies sorted alphabetically</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> movies
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> title <span style=color:#66d9ef>ASC</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>LIMIT 5 OFFSET 5;
</span></span></span></code></pre></div><img src=sql_eg_2.png alt><h3 id=4-multi-table-queries-with-joins>4. Multi-table queries with JOINs</h3><p>JOIN clause</p><ul><li>INNER JOIN</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> <span style=color:#66d9ef>on</span> multiple tables
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>, another_table_column, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> mytable
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> another_table
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>ON</span> mytable.id <span style=color:#f92672>=</span> another_table.id
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition(s)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span>, ... <span style=color:#66d9ef>ASC</span><span style=color:#f92672>/</span><span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> num_limit <span style=color:#66d9ef>OFFSET</span> num_offset;
</span></span></code></pre></div><p>A process that matchs rows from the first table and the second table with
have the same key to create a result row with combined columns from both
tables.</p><p>eg.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> title, rating<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>FROM movies
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  JOIN boxoffice
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ON movies.id = boxoffice.movie_id
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ORDER BY rating DESC;
</span></span></span></code></pre></div><h3 id=5-outer-joins>5. OUTER JOINs</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span><span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>LEFT</span><span style=color:#f92672>/</span><span style=color:#66d9ef>RIGHT</span><span style=color:#f92672>/</span><span style=color:#66d9ef>FULL</span> JOINs <span style=color:#66d9ef>on</span> multiple tables
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>, another_column, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> mytable
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span><span style=color:#f92672>/</span><span style=color:#66d9ef>LEFT</span><span style=color:#f92672>/</span><span style=color:#66d9ef>RIGHT</span><span style=color:#f92672>/</span><span style=color:#66d9ef>FULL</span> <span style=color:#66d9ef>JOIN</span> another_table
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>ON</span> mytable.id <span style=color:#f92672>=</span> another_table.matching_id
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition(s)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span>, ... <span style=color:#66d9ef>ASC</span><span style=color:#f92672>/</span><span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> num_limit <span style=color:#66d9ef>OFFSET</span> num_offset;
</span></span></code></pre></div><blockquote><p>When joining table A to table B, a <code>LEFT JOIN</code> simply includes rows from A regardless of whether a matching row is found in B. The <code>RIGHT JOIN</code> is the same, but reversed, keeping rows in B regardless of whether a match is found in A. Finally, a <code>FULL JOIN</code> simply means that rows from both tables are kept, regardless of whether a matching row exists in the other table.</p></blockquote><p>eg. List all buildings and the distinct employee roles in each building (including empty buildings)</p><img src=sql_eg_3.png alt><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> building_name, <span style=color:#66d9ef>role</span> <span style=color:#66d9ef>FROM</span> buildings
</span></span><span style=display:flex><span><span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> employees
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>ON</span> buildings.building_name <span style=color:#f92672>=</span> employees.building
</span></span></code></pre></div><h3 id=6-a-short-note-on-nulls>6. A short note on NULLs</h3><blockquote><p>Test a column for NULL values in a <strong>WHERE</strong> clause by using either <strong>IS NULL</strong> or <strong>IS NOT NULL</strong> constraint.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span><span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>constraints</span> <span style=color:#66d9ef>on</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>values</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span>, another_column, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> mytable
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>column</span> <span style=color:#66d9ef>IS</span><span style=color:#f92672>/</span><span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>AND</span><span style=color:#f92672>/</span><span style=color:#66d9ef>OR</span> another_condition
</span></span></code></pre></div><p>eg.</p><blockquote><p>Find the names of the buildings that hold no employees.</p></blockquote><img src=sql_eg_4.png alt><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> building_name
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> buildings
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> employees
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>ON</span> building_name <span style=color:#f92672>=</span> building
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>role</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>;
</span></span></code></pre></div><p>此题需要仔细思考一下</p><h3 id=7-queries-with-expressions>7. Queries with expressions</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> expression aliases
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> col_expression <span style=color:#66d9ef>AS</span> expr_description, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> Example query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>both</span> <span style=color:#66d9ef>column</span> <span style=color:#66d9ef>and</span> <span style=color:#66d9ef>table</span> name aliases
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>column</span> <span style=color:#66d9ef>AS</span> better_column_name, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> complex_table_name <span style=color:#66d9ef>AS</span> easy_table_name;
</span></span></code></pre></div><h3 id=8-queries-with-aggregatespt1>8. Queries with aggregates(Pt.1)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>aggregate</span> <span style=color:#66d9ef>function</span> over <span style=color:#66d9ef>all</span> <span style=color:#66d9ef>rows</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> AGG_FUNC(column_or_expression) <span style=color:#66d9ef>AS</span> aggregate_description, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> constraint_expression;
</span></span></code></pre></div><ul><li>Common aggregate functions</li></ul><table><thead><tr><th><strong>Function</strong></th></tr></thead><tbody><tr><td>COUNT(*)</td></tr><tr><td>MIN(column)</td></tr><tr><td>MAX(column)</td></tr><tr><td>AVG(column)</td></tr><tr><td>SUM(column)</td></tr></tbody></table><ul><li>Grouped aggregate functions</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>aggregate</span> functions over groups
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> AGG_FUNC(column_or_expression) <span style=color:#66d9ef>AS</span> aggregate_expression, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> constraint_expression
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span>;
</span></span></code></pre></div><blockquote><p>The <strong>GROUP BY</strong> clause works by grouping rows that have the same value in the column specified.</p></blockquote><h3 id=9--queries-with-aggregates-pt-2>9. Queries with aggregates (Pt. 2)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>Select</span> query <span style=color:#66d9ef>with</span> <span style=color:#66d9ef>HAVING</span> <span style=color:#66d9ef>constraint</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> group_by_column, AGG_FUNC(column_expression) <span style=color:#66d9ef>AS</span> aggregate_result_alias, ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>HAVING</span> group_condition;
</span></span></code></pre></div><blockquote><p>The <strong>HAVING</strong> clause constraints are applied to the grouped rows.</p><p>The <code>HAVING</code> clause constraints are written the same way as the <code>WHERE</code> clause constraints.</p></blockquote><p>eg. Find the total number of years employed by all Engineers</p><img src=sql_eg_5.png alt><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>role</span>, <span style=color:#66d9ef>SUM</span>(years_employed)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> employees
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>role</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>HAVING</span> <span style=color:#66d9ef>role</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Engineer&#34;</span>;
</span></span></code></pre></div><p>result</p><img src=sql_eg_6.png alt><h3 id=10-order-of-execution-of-a-query>10. Order of execution of a Query</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> Complete <span style=color:#66d9ef>SELECT</span> query
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#66d9ef>column</span>, AGG_FUNC(column_or_expression), ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>JOIN</span> another_table
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>table</span>.<span style=color:#66d9ef>column</span> <span style=color:#f92672>=</span> another_table.<span style=color:#66d9ef>column</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>WHERE</span> constraint_expression
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>HAVING</span> constraint_expression
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>column</span> <span style=color:#66d9ef>ASC</span><span style=color:#f92672>/</span><span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>LIMIT</span> <span style=color:#66d9ef>count</span> <span style=color:#66d9ef>OFFSET</span> <span style=color:#66d9ef>count</span>;
</span></span></code></pre></div><h3 id=11-inserting-rows>11. Inserting rows</h3><p>Inserting new data</p><ul><li>Insert statement with values for all columns</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (value_or_expr, another_value_or_expr, ...),
</span></span><span style=display:flex><span>       (value_or_expr_2, another_value_or_expr_2, ...),
</span></span><span style=display:flex><span>       ...;
</span></span></code></pre></div><ul><li>Insert statement with specific columns</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>column</span>, another_column, ...)
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (value_or_expr, another_value_or_expr, ...),
</span></span><span style=display:flex><span>       (value_or_expr_2, another_value_or_expr_2, ...),
</span></span><span style=display:flex><span>       ...;
</span></span></code></pre></div><p><em>注意<code>string格式</code>的双引号</em></p><h3 id=12-updating-rows>12. Updating rows</h3><p>UpdateexistingTdata+08 = &lsquo;00&rsquo;
-UpdateTstatement with values+08 = &lsquo;00&rsquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> <span style=color:#66d9ef>column</span> <span style=color:#f92672>=</span> value_or_expr,
</span></span><span style=display:flex><span>    other_column <span style=color:#f92672>=</span> another_value_or_expr,
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition;
</span></span></code></pre></div><p><em>It&rsquo;s recommended that you run the constraint in a <code>SELECT</code> query first to ensure that you are updating the right rows.</em></p><h3 id=13-deleting-rows>13. Deleting rows</h3><p>Delete data from a table in the database</p><ul><li>Delete statement with condition</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> condition;
</span></span></code></pre></div><p><em>It&rsquo;s recommended that you run the constraint in a <code>SELECT</code> query first to ensure that you are removing the right rows.</em></p><h3 id=14-creating-tables>14. Creating tables</h3><ul><li>Create table statement</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>EXISTS</span> <span style=color:#66d9ef>table_name</span> (
</span></span><span style=display:flex><span> <span style=color:#66d9ef>column</span> DataType TableConstraint <span style=color:#66d9ef>DEFAULT</span> default_value,
</span></span><span style=display:flex><span>    another_column DataType TableConstraint <span style=color:#66d9ef>DEFAULT</span> default_value,
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><blockquote><p>Table data types</p></blockquote><table><thead><tr><th>Data type</th><th>Description</th></tr></thead><tbody><tr><td>INTEGER, BOOLEAN</td><td></td></tr><tr><td>FLOAT, DOUBLE, REAL</td><td>precise numerical data</td></tr><tr><td>CHARACTER, VARCHAR, TEXT</td><td></td></tr><tr><td>DATE, DATETIME</td><td></td></tr></tbody></table><blockquote><p>Table constraints</p></blockquote><table><thead><tr><th>Constraint</th><th>Description</th></tr></thead><tbody><tr><td>PRIMARY KEY</td><td>This means that the values in this column are unique, and each value can be used to identify a single row in this table.</td></tr><tr><td>AUTOINCEREMENT(自增)</td><td>For integer values, this means that the value is automatically filled in and incremented with each row insertion.</td></tr><tr><td>UNIQUE</td><td>The values in this column have to be unique</td></tr><tr><td>NOT NULL</td><td></td></tr><tr><td>FOREIGN KEY</td><td>This is a consistency check which ensures that each value in this column corresponds to another value in a column in another table.</td></tr></tbody></table><p>eg.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> movies (
</span></span><span style=display:flex><span>    id INTEGER <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>    title TEXT,<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    director TEXT,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    year INTEGER,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    length_minutes INTEGER
</span></span></span><span style=display:flex><span><span style=color:#e6db74>);
</span></span></span></code></pre></div><h3 id=15-altering-tables>15. Altering tables</h3><p>Adding columns</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> Altering <span style=color:#66d9ef>table</span> <span style=color:#66d9ef>to</span> <span style=color:#66d9ef>add</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>column</span>(s)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>table_name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>column</span> DataType OptionalTableConstraint
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>DEFAULT</span> default_value;
</span></span></code></pre></div><p>Removing columns</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> Altering <span style=color:#66d9ef>table</span> <span style=color:#66d9ef>to</span> remove <span style=color:#66d9ef>column</span>(s)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>table_name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>DROP</span> column_to_be_deleted;
</span></span></code></pre></div><p>Renaming the table</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>%</span> Altering <span style=color:#66d9ef>table</span> name
</span></span><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>table_name</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>RENAME</span> <span style=color:#66d9ef>TO</span> new_table_name;
</span></span></code></pre></div><h3 id=16-dropping-tables>16. Dropping tables</h3><ul><li>Drop table statement</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>EXISTS</span> <span style=color:#66d9ef>table_name</span>;
</span></span></code></pre></div><p><em>IfyouThave another table that is dependent on columns in table you are removing (for example, with a <code>FOREIGN KEY</code> dependency) then you will have to either update all dependent tables first to remove the dependent rows or to remove those tables entirely.</em>+08 = &lsquo;00&rsquo;</p><p>FINISHED: 20_1_29</p><h3 id=参考>参考</h3><p>[1] <a href=https://sqlbolt.com target=_blank rel="noopener noreferrer">SQLBolt</a></p></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>