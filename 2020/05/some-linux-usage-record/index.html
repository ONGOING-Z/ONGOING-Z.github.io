<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>一些Linux的使用 | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>一些Linux的使用</span></h1><h2 class=date>2020/05/03</h2></div><main><p>记录自己在使用linux中渐渐使用的命令和一些方法。</p><ol><li><p>在一个终端中打开另一个窗口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ctrl + shift + t
</span></span></code></pre></div></li><li><p>回到上一次目录</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd -
</span></span></code></pre></div></li><li><p>列出当前登录用户</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>w
</span></span></code></pre></div></li><li><p>Linux进出sudo的方法</p><p>进入<code>sudo</code>mode = <code>sudo -i</code>
退出<code>sudo</code>mode = <code>ctrl + d</code></p></li><li><p>grep(general regular expression print)
<code>ls | grep "linux"</code> = List file that its name includes string &ldquo;linux&rdquo;.</p></li><li><p>Clear commands history
<code>history -c</code></p></li><li><p>终端锁定与退出锁定(终端无法输入的假死问题)<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><ul><li>终端锁定
<code>ctrl + s</code></li><li>退出锁定
<code>ctrl + q</code></li></ul></li><li><p>File permission</p><ul><li><code>chmod</code>
Change mode.
10number = <code>d</code>(directory) or <code>-</code>(that represents file)
Permission =<ul><li><code>r</code> = (100)2 //4</li><li><code>w</code> = (010)2 //2</li><li><code>x</code> = (001)2 //1
eg. <code>chmod 777 file/dir</code> // Give file/dir rwx permission.</li></ul></li><li><code>chgrp</code>
Change file group.</li><li><code>chown</code>
Change file owner.</li></ul></li><li><p>Change font size in terminal</p><p>Change bigger = <code>ctrl -</code>
Change smaller = <code>ctrl +</code></p></li><li><p>Rename</p><p>将test.jpg改成test1.jpg</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mv <span style=color:#f92672>{</span>test,test1<span style=color:#f92672>}</span>.jpg
</span></span></code></pre></div></li><li><p>在linux中跳出很深的文件夹，如果没有记住文件路径，就要一层层<code>cd</code>过去，浪费很多的时间。</p><p>解决方法1
在<code>/etc/profile.d/</code>目录下新建例如<code>dd.sh</code>文件，文件内容如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias dd<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cd /media/folder1/folder2/.../&#39;</span>
</span></span></code></pre></div><p>接下来保存退出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source dd.sh
</span></span></code></pre></div><p>效果 = 在命令行中输入<code>dd</code>即可实现挑入指定目录。
并且重启之后在命令行中依然生效。</p><p>解决方法2
在<code>~/.bashrc</code>中添加</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias dd<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cd /media/folder1/folder2/.../&#39;</span>
</span></span></code></pre></div><p>也可以有同样的效果。</p></li><li><p>Linux光标移动</p><p><code>ctrl + a</code> = 行首
<code>ctrl + e</code> = 行尾</p><p><code>ctrl + f</code> = 光标右移
<code>ctrl + b</code> = 光标左移</p><p><code>esc + f</code> = 右移一个单词
<code>esc + b</code> = 左移一个单词</p></li><li><p>Linux <code>mv</code>
功能
(1) 修改名称
(2) 移动文件</p></li><li><p>Bash
(1) 注释 = <code>#</code>
(2) <code>#!/bin/bash</code>的意义
以<code>#</code>代表是个注释，但是<code>#!</code>并不是注释了，它用来指明这个脚本所需要的<code>Shell</code>
(3) shell变量类型
变量类型只有字符串</p></li><li><p>caps -> ctrl(reference 32)</p></li><li><p>Download video in CLI
(1) you-get
(2)youtube_dl</p></li><li><p>du(disk usage)</p></li><li><p><code>ctrl + u</code> = 从光标处删除文本直到行首</p></li><li><p><code>ctrl + k</code> = 从光标处删除文本直到行尾</p></li><li><p><code>alt + f</code> = 向后一个单词</p></li><li><p><code>alt + b</code> = 向前一个单词</p></li><li><p>重复使用上一个命令: <code>!!</code></p></li><li><p><code>dstat</code>
View the net speed in late 10 seconds and other functions.</p></li><li><p>Symbolic links</p></li><li><p>I/O redirection</p></li></ol><blockquote><p>I/O redirection allows us to change where output goes and where input comes from. Normally, output goes to the screen and input comes from the keyboard, but with I/O redirection we can change that.</p></blockquote><ol start=26><li><p>The Letter-Based Method</p><blockquote><p>In addition to the method described above there is a second way to change permissions. Chmod uses either the hexadecimal representation of the permissions or a letter-based representation. The letter-based representation is [ugoa][+-][rwx]. This is one of the letters u (user=file owner), g (group), o (others), a (all users, groups and others); followed by + or - to add or remove permissions; and then the symbolic representation of the permissions in the form of r(read) w(write) x(execute). To extend Write permissions to all for the file &ldquo;file.txt&rdquo;,</p></blockquote><p>For example, you would type</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod a+w file.txt
</span></span></code></pre></div></li><li><p><code>uptime</code>
Tell how long the system has been running.</p></li><li><p>Change user</p><pre tabindex=0><code>su [username]
</code></pre><p>退出此用户: <code>exit</code></p></li><li><p>Add user</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>useradd <span style=color:#f92672>[</span>username<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>passwd <span style=color:#f92672>[</span>username<span style=color:#f92672>]</span>
</span></span></code></pre></div></li><li><p>Delete user</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>userdel <span style=color:#f92672>[</span>-r<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>username<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>-r = remove the home dir of [username]</p></li><li><p>Print current effective user</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>whoami
</span></span></code></pre></div></li><li><p>linux将cpas->ctrl</p><p>(1) Edit <code>/etc/default/keyboard</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span># KEYBOARD CONFIGURATION FILE
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Consult the keyboard(5) manual page.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>XKBMODEL=&#34;pc105&#34;
</span></span><span style=display:flex><span>XKBLAYOUT=&#34;cn&#34;
</span></span><span style=display:flex><span>XKBVARIANT=&#34;&#34;
</span></span><span style=display:flex><span><span style=color:#f92672>- XKBOPTIONS=&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+ XKBOPTIONS=&#34;ctrl =nocaps&#34;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>
</span></span><span style=display:flex><span>BACKSPACE=&#34;guess&#34;
</span></span></code></pre></div><p>(2) 运行如下命令，设置生效</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dpkg-reconfigure keyboard-configuration
</span></span></code></pre></div></li><li><p>cp 排除某个目录
例. 有目录b, c, 复制到<code>/f</code>下，排除b</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp -r !<span style=color:#f92672>(</span>b<span style=color:#f92672>)</span> /f
</span></span></code></pre></div></li><li><p>在linux下弹出u盘命令（假设u盘设备是sdb1）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo eject -s /dev/sdb1
</span></span></code></pre></div></li><li><p>ccat</p><p>内置的<code>cat</code>查看命令没有语法高亮，但是使用<code>ccat</code>可以有这个作用。</p><p>下载二进制代码文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://github.com/jingweno/ccat/releases/download/v1.1.0/linux-amd64-1.1.0.tar.gz
</span></span></code></pre></div><p>解压</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar xfz linux-amd64-1.1.0.tar.gz
</span></span></code></pre></div><p>将<code>ccat</code>文件复制到<code>/usr/local/bin/</code>文件夹下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp linux-amd64-1.1.0/ccat /usr/local/bin/
</span></span></code></pre></div><p>使用<code>ccat</code>命令查看文件会发现文件显示变成彩色的了。</p></li><li><p>ssh & public key</p><p>(1) 本地生成公钥</p><pre tabindex=0><code>ssh-keygen -t rsa
</code></pre><p>之后全部默认回车即可。</p><p>(2) 将本地公钥<code>~/.ssh/id_rsa.pub</code>复制到远程主机<code>~/.ssh/autoorized_keys</code>文件中，如果目录和文件皆不存在，直接创建新的文件。
(3) 重启ssh服务</p><pre tabindex=0><code>service ssh restart
</code></pre><p>之后与主机相连就不必再输入密码。</p></li><li><p><code>ls</code>的<code>-S</code>选项</p><blockquote><p>sort by WORD instead of name = none (-U), size (-S), time (-t), version (-v), extension (-X)</p><p>准确来说就是将文件从大到小进行排序。</p></blockquote></li><li><p><code>tab</code></p><ul><li>命令补全 = tab接在一串指令的第一个字的后面</li><li>文件补齐 = tab接在一串指令的第二个字的后面</li></ul></li><li><p><code>find</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find dir_name -name filename_to_be_searched
</span></span></code></pre></div></li><li><p>在 bash 里，使用 <code>Ctrl-R</code> 而不是上下光标键来查找历史命令。</p></li><li><p>使用 <code>man ascii</code> 来查看 ASCII 表。</p></li><li><p>命令行注释命令: <code>alt + #</code></p></li></ol><hr><h3 id=linux各目录>Linux各目录</h3><h4 id=etc>/etc</h4><ol><li>含义: and so on</li><li>功能: 存放零零碎碎的东西</li></ol><h3 id=linux各种解压命令汇总>linux各种解压命令汇总</h3><h4 id=tarxz><code>.tar.xz</code></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$xz -d filename.tar.xz
</span></span><span style=display:flex><span>$tar -xvf filename.tar
</span></span></code></pre></div><h4 id=targz><code>tar.gz</code></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -zxvf xxx.tar.gz
</span></span></code></pre></div><h4 id=rar><code>.rar</code></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>unrar e file.rar <span style=color:#75715e># e = 解压压缩包中的全部问价至文件夹</span>
</span></span></code></pre></div><p>今天因要下载win10 iso文件，奈何文件太大，只好利用winrar软件将4g的iso文件分成了4个1g的小文件，转到linux下后，直接将4个小文件提取了出来，但问题是4个提取出来的文件并没有合并在一起，这可不是我想要的结果，百度一查，赶紧在linux安装了rar,只需用<code>rar e name.part1.rar</code>，提取后的文件就是合并后的文件了。</p><hr><h3 id=problems>Problems</h3><h4 id=在ubuntu1901上安装curl出现问题curl---depends-libcurl4--7580-2ubuntu38-but-7653-1ubuntu3-is-to-be-installed>在ubuntu19.01上安装curl出现问题curl = Depends: libcurl4 (= 7.58.0-2ubuntu3.8) but 7.65.3-1ubuntu3 is to be installed</h4><p>问题如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>The following packages have unmet dependencies =
</span></span><span style=display:flex><span>curl  = Depends: libcurl4 (= 7.58.0-2ubuntu3.8) but 7.65.3-1ubuntu3 is to be installed
</span></span><span style=display:flex><span>E: Unable to correct problems, you have held broken packages.
</span></span></code></pre></div><p>解决方法:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get purge libcurl4
</span></span></code></pre></div><p>接下来就可以正常安装<code>curl</code>了。</p><h4 id=linux升级gdb>linux升级gdb</h4><p>gdb官网下载太慢，<a href=https://mirrors.tuna.tsinghua.edu.cn/gnu/gdb/ target=_blank rel="noopener noreferrer">清华大学镜像站</a>可以下载。</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.cnblogs.com/guochaoxxl/p/10428991.html target=_blank rel="noopener noreferrer">https://www.cnblogs.com/guochaoxxl/p/10428991.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>