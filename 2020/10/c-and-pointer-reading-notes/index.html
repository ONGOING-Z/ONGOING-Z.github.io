<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>《C and pointer》阅读笔记 | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>《C and pointer》阅读笔记</span></h1><h2 class=date>2020/10/01</h2></div><main><p>关于《C 和指针》这本书的读书记录。</p><h3 id=c-和指针>《C 和指针》</h3><h4 id=1th-快速上手>1th 快速上手</h4><ol><li><p>数组名</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>int</span> arr[<span style=color:#ae81ff>4</span>];
</span></span></code></pre></div><p>假设<code>int</code>型变量占 4 Byte，那么这个声明，编译器会给 c 预留内存空间 4×4 Byte，并且
数组名代表着指向数组第一个元素的指针。</p></li><li><p>字符串常量存储在常量区，常量区存储的内容是不能被修改的。</p></li><li><p>指针指定一个存储与计算机内存中的值的地址。</p></li><li><p>每个 C 程序必须有一个 main 函数，因为它是程序执行的起点。</p></li><li><p>在 C 语言中，数组参数是以<code>引用(reference)</code>形式进行传递的，即传址调用，
而标量和常量是按<code>值(value)</code>传递的。
在函数中对标量参数的任何修改都会在函数返回时丢失，因此，被调用函数无法修改
调用函数以传值形式传递给它的参数。
然而，当被调用函数修改数组参数的其中一个元素时，调用函数所传递的数组就会被实际地修改。</p></li><li><p>在 C 语言中，字符串是一串以<code>NUL</code>字节结尾的字符。<code>NUL</code>是作为字符串终止符，它本身并不被看作是字符串的一部分。字符串常量就是源程序中被<code>双引号</code>括起来的一串字符。例如，<code>"Hello"</code>在内存中占据 6 个字节的空间。</p></li><li><p>由于 scanf 函数的实现原理，所有标量参数的前面必须加上一个<code>&</code>符号。数组参数前面不需要加上<code>&</code>符号，但是若数组参数中出现下标引用，即实际参数是数组某个特定元素，那么它的前面也必须加上<code>&</code></p></li><li><p>编程提示</p><ul><li>在 while 和 if 表达式中蕴含赋值操作</li><li>始终要进行检查，确保数组不越界</li></ul></li></ol><h4 id=3th-数据>3th 数据</h4><ol><li><p>在 C 语言中，仅有 4 中基本数据类型 &ndash;
整型、浮点型、指针和聚合类型（如数组和结构等).</p></li><li><p>指针可以有效地实现如 tree 和 list 这类高级数据结构。</p></li><li><p>房子和它的门牌号码标识</p></li><li><p>可以把计算机内存想象成一条长街上的一间间房子，每间房子都用一个唯一的号码进行标识。每个位置包含一个值，这和它的地址是独立且显著不同的，即使它们都是数字。</p></li><li><p>程序在使用字符串常量会生成一个“指向字符的常量指针”。当一个字符串常量出现于一个表达式中时，表达式所使用的值就是这些字符所存储的地址，而不是这些字符本身。</p></li><li><p>不能把字符串常量赋值给一个字符数组，因为字符串常量的直接值是一个指针，而不是这些字符本身。</p></li><li><p>typedef 允许你为各种数据类型定义新名字。
<code>typedef int another_name</code></p><p>使用typedef声明类型可以减少使声明变得又臭又长的危险，尤其是那些复杂的声明。</p></li></ol><h4 id=4th-语句>4th 语句</h4><ol><li><p>空语句</p><p>C 最简单的语句就是空语句，它本身只包含一个分号。空语句本身并不执行任何任务，但有时还是有用。
适用场景 = 语法要求出现一条完整的语句。</p></li><li><p>括号是 if 语句的一部分。</p></li><li><p>C 并不具备布尔类型，零值表示假，非零值表示真。</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>if</span> (x <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;...&#34;</span>);
</span></span></code></pre></div><p>上边这条语句中，表达式<code>x > 3</code>的值将是 0 或 1.</p><h4 id=5th-操作符和表达式>5th 操作符和表达式</h4><ol><li>AND、OR、XOR 要求操作数为整数类型，它们对操作数对应的位进行指定操作，每次对左右操作数的各一位进行操作。</li><li>下标引用操作和间接访问表达式是等价的。
<code>array[下标] &lt;=> *(array + (下标))</code></li></ol><h4 id=6th-指针>6th 指针</h4><img src=variable_addr.png alt><p>Pointers - variables that store address of another variable.
指针变量存储的是地址</p><ol><li><p>间接访问 (de-referencing) 操作符</p></li><li><p>变量给了我们更方便的方法记住地址，但是硬件仍然通过地址访问内存位置。</p></li><li><p>变量的值就是分配给该变量的内存位置所存储的数值。??</p></li><li><p>指针变量可以作为左值，并不是因为它们是指针，而是因为它们是变量。对指针变量进行间接访问表示我们应该访问指针所指向的位置。</p><img src=pointer_1.png alt><img src=pointer_2.png alt><p><code>int *b = &amp;a</code>和<code>b = &amp;a</code>的区别是什么？
这两个表达的应该是一样的意思。
看第二个 b，这个 b 代表的是指针，如果加上声明语句的话和前一个是一样的
感觉<code>int * p; p = &amp;a;</code>,这个更好理解。</p><p>一个例子</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>argv[])
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> <span style=color:#f92672>*</span>p;
</span></span><span style=display:flex><span>    p <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>a; <span style=color:#75715e>// &amp;a is address of a
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, p); <span style=color:#75715e>// p is 2002
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, p <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>); <span style=color:#75715e>// p+1 is 2006
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>a pointer to pointer(pic source = youtube mycodeschool)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#f92672>*</span>p;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#f92672>**</span>q;
</span></span><span style=display:flex><span>q <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>p;
</span></span></code></pre></div></li></ol><img src=pointer_to_pointer.png alt></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>