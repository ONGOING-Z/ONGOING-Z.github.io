<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Linux 服务器报错：No space left on device | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>Linux 服务器报错：No space left on device</span></h1><h2 class=date>2021/10/18</h2></div><main><p>前言：之前在测试环境遇到了一个问题，查看应用的日志发现错误：No space left on device。以为是服务器磁盘满了。
首先使用了<code>df -h</code>查看磁盘的剩余容量，发现大部分都是还没有使用的，就很奇怪为什么会报上面这个错误。</p><p>因为不只是磁盘满了会报这个错误，还有另外一个错误，是关于 inode 的。</p><p>如果磁盘满了或者 inode 也满了，在这两种情况中的一个发生，就会让我们在控制台上看到<code>No space left on device</code>这样的报错。</p><img src=no-space.png alt><p>那么如何查看当前机器上的 inode 情况呢？使用<code>df -i</code>命令即可查看。</p><img src=df_i.png alt><p>所以当我们使用 <code>df -h</code> 发现磁盘还未满的时候，还要用 <code>df -i</code> 验证下 inode 是否已满，因为有可能发生 inode 已经用光，但是硬盘还未存满的情况。这时，就无法在硬盘上创建新文件。</p><h3 id=参考>参考</h3><p><a href=http://www.ruanyifeng.com/blog/2011/12/inode.html target=_blank rel="noopener noreferrer">http://www.ruanyifeng.com/blog/2011/12/inode.html</a></p></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>