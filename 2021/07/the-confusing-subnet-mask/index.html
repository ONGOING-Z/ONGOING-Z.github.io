<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>让我困惑的 Subnet Mask(子网掩码) | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>让我困惑的 Subnet Mask(子网掩码)</span></h1><h2 class=date>2021/07/22</h2></div><main><p>前言：之前一直不太懂 subnet mask(子网掩码) 这个家伙的作用，不管是看了别人文章里的比喻还是一些计算后，自己还是很懵。但是其实自己懂了之后，其实关键是这个“东西”的作用到底是什么，这个“东西”到底扮演了什么样的角色，这才是较为重要的，不要一上来就直接进行计算，懂得为什么会去这样做才是重中之重。</p><p>首先来声明下 subnet mask 的作用：用来标识主机所连接的网络。是区分 network Id（网络号）和 host Id（主机号）的边界。至于怎么来区别我们下面来说：</p><p>我们熟知的 ip 主要是由两部分组成 = <code>Network ID</code> + <code>Host ID</code>.中文翻译过来是 网络号 和 主机号。</p><p>现假设我们的 ip 是 <code>99.0.129.36</code>，subnet mask 是 <code>255.255.255.0</code></p><p>首先我们将 ip 转换为其二进制的形式，对于 subnet mask 也是如此。</p><img src=Ip_ManimCE_v0.8.0.png alt><p>得到相对应的二进制编码形式后，有这样一个规则：subnet mask 二进制形式中为 1 的位，则“启用”对应的 ip 的位置，来看下面这张图：</p><img src=TestBrace_ManimCE_v0.8.0.png alt><p>这样我们就得到了二进制形式的 Network ID = <code>01100011.00000000.10000001</code>，转换为十进制即<code>99.0.129.0</code>，这是网络号。</p><p>剩余的位则是 Host ID，有八位。</p><p>又因为在网段中有两个保留位置：</p><ul><li>Host ID 全为 0 时：表示网段号，即 Network ID</li><li>Host ID 全为 1 时：表示广播地址（这里是 99.0.129.255）</li></ul><p>因此这个网段可以支持的主机数量为 2^8 - 2 = 254 个。</p><p>当我们的网段中有 1000 台主机时，这个时候就需要给 host id 分配 10 位了，对应的 network id 有 22 位，之后就可以得到对应的网络号。</p><p>对于 ip 和 subnet mask 还有一种表示方法：如<code>99.0.129.36/24</code>，这里的 24 表示 24 个 1，即 subnet mask 中 1 的个数，这种表示方法叫做 <a href=https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#CIDR_notation target=_blank rel="noopener noreferrer"><code>CIDR Notation</code></a>。</p><p><em>注意：subnet mask 中的 1 必须是连续的 1，中间不能有 0.</em></p><p>subnet mask 可以保证为我们合理划分网段，并且给主机留够足够的 ip，可以使浪费达到很小，因为它可以很方便的进行加减位数。</p></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>