<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>接口的默认方法 | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>接口的默认方法</span></h1><h2 class=date>2025/06/05</h2></div><main><h3 id=一背景>一、背景</h3><p>例如这个场景</p><ol><li><p>最开始，你写了一个接口TestInterface这个接口中没有声明任何方法，是一个空接口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>TestInterface</span> {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>你根据这个空接口有一个实现类TestInterfaceImpl</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestInterfaceImpl</span> <span style=color:#66d9ef>implements</span> TestInterface {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 因为接口中没有声明任何方法，所以实现类自然也没有。</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>陆陆续续这个接口下面实现了很多很多类。</p></li><li><p>现在想要对这个接口添加方法。如果在接口TestInterface中直接添加方法声明，会强制下面所有实现类全部都要实现方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>TestInterface</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodA</span>(); <span style=color:#75715e>// 给接口添加方法声明，实现类TestInterfaceImpl也需要实现此方法</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>使用 default 关键在接口中去声明方法，不会影响到先有实现类的功能</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>TestInterface</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>newExec</span>() {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ol><h3 id=二优点>二、优点</h3><ol><li>向后兼容，不会导致兼容性的问题。已有的实现类无需实现此方法，可正常工作。</li><li>符合开闭原则：对扩展开放，对修改关闭。</li></ol><h3 id=三现有框架例子>三、现有框架例子</h3><p>直接在spring源码中搜索default关键字的接口，你会发现很多这样使用的例子。最开始就是普通接口及接口方法的声明，后面有default关键字声明的方法。</p><img src=spring_interface_default_method.png alt></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>