<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>搭建 Spring 源码阅读环境 | ongoing's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>首页</a></li><li><a href=/categories/>分类</a></li><li><a href=/about/>关于</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>搭建 Spring 源码阅读环境</span></h1><h2 class=date>2025/04/02</h2></div><main><h3 id=一背景>一、背景</h3><p>搭建 Spring 源码阅读环境。</p><h3 id=二步骤>二、步骤</h3><h4 id=下载源码>下载源码</h4><p>打开<a href=https://github.com/spring-projects/spring-framework target=_blank rel="noopener noreferrer">spring-framework 仓库地址</a>，将项目源码 clone 到本地。</p><h4 id=本地编译源码>本地编译源码</h4><p>在用 IDEA 打开项目，这里我切换的分支是<code>5.3.x</code>，项目就会自动拉取依赖进行编译。</p><p>但问题是下载依赖的速度太慢了。最好用【三、技巧】中的方法加快一下下载速度，编译也马上就完成了。</p><h4 id=验证编译是否有问题>验证编译是否有问题</h4><ol><li><p>新建一个自定义的模块</p><img src=create_a_new_module.png alt><p>建好后模块的目录树如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>➜  my-test git:<span style=color:#f92672>(</span>5.3.x<span style=color:#f92672>)</span> ✗ tree . -L <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── build  <span style=color:#75715e># 无需关注</span>
</span></span><span style=display:flex><span>│   ├── classes <span style=color:#75715e># 无需关注</span>
</span></span><span style=display:flex><span>│   ├── generated <span style=color:#75715e># 无需关注</span>
</span></span><span style=display:flex><span>│   ├── resources <span style=color:#75715e># 无需关注</span>
</span></span><span style=display:flex><span>│   └── tmp <span style=color:#75715e># 无需关注</span>
</span></span><span style=display:flex><span>├── build.gradle <span style=color:#75715e># 需要关注</span>
</span></span><span style=display:flex><span>└── src
</span></span><span style=display:flex><span>    ├── main <span style=color:#75715e># 需要关注</span>
</span></span><span style=display:flex><span>    ├── test <span style=color:#75715e># 无需关注</span>
</span></span><span style=display:flex><span>    └── testFixtures <span style=color:#75715e># 无需关注</span>
</span></span></code></pre></div></li></ol><h3 id=三技巧>三、技巧</h3><h4 id=idea-设置代理加快项目下载依赖的速度>IDEA 设置代理，加快项目下载依赖的速度</h4><p>设置路径：<code>Settings | Appearance & Behavior | System Settings | HTTP Proxy</code>
<img src=idea_set_http_proxy.png alt></p><h4 id=设置注释类型>设置注释类型</h4><img src=comment_initial_form.png alt><p>设置路径：<code>Settings | Editor | General | Appearance</code>
<img src=config_set_path.png alt></p><p>设置之后的效果</p><img src=comment_set_read_status.png alt><h4 id=设置书签>设置书签</h4><ul><li><code>F11</code>: 设置书签</li><li><code>shift + F11</code>: 展示设置的所有书签</li></ul><h4 id=最好-fork-源码仓库并新建一个自己的-debug-分支>最好 fork 源码仓库并新建一个自己的 debug 分支</h4><p>因为在阅读、调试的过程中，会在源码中做一些笔记，并且提交到自己的 fork 仓库上去。</p><h4 id=最好直接对项目进行-clone不要在网页上去下载对应分支的代码>最好直接对项目进行 clone，不要在网页上去下载对应分支的代码</h4><p>下载的 zip 代码包中不包含 git 提交信息。
编译也有可能出问题。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>fatal: not a git repository
</span></span></code></pre></div><h4 id=注释>注释</h4><p>最好写在代码上面一行，不要写在代码右侧。因为目光是从上到下，很容易不去看代码右边是什么。
推荐</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 声明 a</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> a;
</span></span></code></pre></div><p>不推荐</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>int</span> a; <span style=color:#75715e>// 声明 a</span>
</span></span></code></pre></div></main><script>document.addEventListener("DOMContentLoaded",function(){const e=new PhotoSwipeLightbox({gallery:".pswp-gallery",children:"a",pswpModule:PhotoSwipe});e.init()})</script>